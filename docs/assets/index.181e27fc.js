var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(l,t,n)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[t]=n,o=(e,l)=>{for(var t in l||(l={}))s.call(l,t)&&i(e,t,l[t]);if(n)for(var t of n(l))a.call(l,t)&&i(e,t,l[t]);return e};import{d as r,c,a as u,o as d,b as p,r as v,e as h,w as m,f as g,i as b,T as f,n as k,g as y,h as w,F as $,m as j,E as C,p as x,j as S}from"./vendor.96ab9667.js";var E=r({props:{theme:String,onChange:{type:Function,default:()=>{}}},setup:e=>()=>c("header",{class:"page-header"},[c("section",{class:"container"},[c("h1",{class:"project-name"},[u("md-editor-v3")]),c("p",{class:"project-desc"},[u("Markdown编辑器，基于vue3，使用jsx和typescript语法开发，支持切换主题、prettier美化文本等。")]),c("p",{class:"header-actions"},[c("button",{class:"btn btn-header"},[c("a",{href:"https://github.com/imzbf/md-editor-v3",target:"_blank",title:"md-editor-v3"},[u("GitHub源码")])]),c("button",{class:"btn btn-header",onClick:()=>e.onChange("light")},[u("默认模式")]),c("button",{class:"btn btn-header",onClick:()=>e.onChange("dark")},[u("暗黑模式")])])])])}),T="//at.alicdn.com/t/font_2605852_w2rq8ip7vg.js";const L={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",codeRow:"行内代码",code:"会计代码",link:"链接",image:"图片",table:"表格",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",htmlPreview:"html代码预览",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},linkModalTips:{title:"添加",descLable:"链接描述：",descLablePlaceHolder:"请输入描述...",urlLable:"链接地址：",UrlLablePlaceHolder:"请输入链接...",buttonOK:"确定",buttonUpload:"上传"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",htmlPreview:"html preview",github:"source code"},titleItem:{h1:"lv1 heading",h2:"lv2 heading",h3:"lv3 heading",h4:"lv4 heading",h5:"lv5 heading",h6:"lv6 heading"},linkModalTips:{title:"add ",descLable:"desc:",descLablePlaceHolder:"enter a description...",urlLable:"link:",UrlLablePlaceHolder:"enter a link...",buttonOK:"ok",buttonUpload:"upload"}}};var F=new class{constructor(){this.pools={}}remove(e,l){const t=this.pools[e];t&&(this.pools[e]=t.filter((e=>e===l)))}on(e){return void 0===this.pools[e.name]&&(this.pools[e.name]=[]),this.pools[e.name].push(e.callback),this.pools[e.name].includes(e.callback)}emit(e,...l){const t=this.pools[e];t&&t.forEach((t=>{try{t(...l)}catch(n){console.error(`${e}监听事件执行异常！`,n)}}))}};var D=r({setup:()=>()=>c("div",{class:`${Y}-divider`},null)});const P=({instance:e,ctx:l,props:t={}},n="default")=>{const s=(null==e?void 0:e.$slots[n])||(null==l?void 0:l.slots[n]);return(s?s(e):"")||t[n]};var O=r({props:{trigger:{type:String,default:"click"},overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e,n){const s=`${Y}-dropdown-hidden`,a=v({overlayClass:[`${Y}-dropdown-overlay`,s],overlayStyle:{}}),i=h(document.body),r=h(document.body),u=(n,s="click")=>{if("click"===s){const n=i.value,s=r.value,d=n.getBoundingClientRect(),p=n.offsetTop,v=n.offsetLeft,h=d.height,m=d.width;a.overlayStyle=(c=o({},a.overlayStyle),u={top:p+h+"px",left:v-s.offsetWidth/2+m/2+"px",marginTop:"10px"},l(c,t(u))),e.onChange(!e.visible)}else e.onChange(!0);var c,u};m((()=>e.visible),(e=>{e?a.overlayClass=a.overlayClass.filter((e=>e!==s)):a.overlayClass.push(s)}));const k=l=>{const t=i.value,n=r.value;t.contains(l.target)||n.contains(l.target)||e.onChange(!1)};return d((()=>{document.addEventListener("click",k)})),p((()=>{document.removeEventListener("click",k)})),()=>{const l=P({ctx:n}),t=P({props:e,ctx:n},"overlay"),s=g(l instanceof Array?l[0]:l,{onClick:u,ref:i}),o=g(t instanceof Array?t[0]:t,{class:a.overlayClass,style:a.overlayStyle,ref:r});return[s,c(f,{to:e.to},"function"==typeof(d=o)||"[object Object]"===Object.prototype.toString.call(d)&&!b(d)?o:{default:()=>[o]})];var d}}});const M=(e,l=0,t=l)=>{e.setSelectionRange?setTimeout((()=>{e.setSelectionRange(l,t),e.focus()}),0):console.log("无法重置光标位置！")},q=(e,l,t)=>{const{deviationStart:n=0,deviationEnd:s=0,direct:a=!1,select:i=!1}=t;let o="";if(e.selectionStart||0===e.selectionStart){const t=e.selectionStart,a=e.selectionEnd||0;o=e.value.substring(0,t)+l+e.value.substring(a,e.value.length),M(e,i?t+n:t+l.length+s,t+l.length+s)}else o+=l;return a&&(e.value=o),o},K=(e,l)=>{const t=e.clientHeight,n=l.clientHeight,s=(e.scrollHeight-t)/(l.scrollHeight-n),a=()=>{l.scrollTo({top:e.scrollTop/s})};return e.removeEventListener("scroll",a),e.addEventListener("scroll",a),()=>{e.removeEventListener("scroll",a)}};var I,U,H,N,R,z,B={exports:{}};
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/I=B,U="undefined"!=typeof window&&void 0!==window.document?window.document:{},H=I.exports,N=function(){for(var e,l=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],t=0,n=l.length,s={};t<n;t++)if((e=l[t])&&e[1]in U){for(t=0;t<e.length;t++)s[l[0][t]]=e[t];return s}return!1}(),R={change:N.fullscreenchange,error:N.fullscreenerror},z={request:function(e,l){return new Promise(function(t,n){var s=function(){this.off("change",s),t()}.bind(this);this.on("change",s);var a=(e=e||U.documentElement)[N.requestFullscreen](l);a instanceof Promise&&a.then(s).catch(n)}.bind(this))},exit:function(){return new Promise(function(e,l){if(this.isFullscreen){var t=function(){this.off("change",t),e()}.bind(this);this.on("change",t);var n=U[N.exitFullscreen]();n instanceof Promise&&n.then(t).catch(l)}else e()}.bind(this))},toggle:function(e,l){return this.isFullscreen?this.exit():this.request(e,l)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,l){var t=R[e];t&&U.addEventListener(t,l,!1)},off:function(e,l){var t=R[e];t&&U.removeEventListener(t,l,!1)},raw:N},N?(Object.defineProperties(z,{isFullscreen:{get:function(){return Boolean(U[N.fullscreenElement])}},element:{enumerable:!0,get:function(){return U[N.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(U[N.fullscreenEnabled])}}}),H?I.exports=z:window.screenfull=z):H?I.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};var _=B.exports;var A=r({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:[Number,String],default:"auto"},onClosed:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e,l){const t=h(e.visible),n=h([`${Y}-modal`]),s=h(),a=h();let i=()=>{};const o=v({left:"0px",top:"0px"});return d((()=>{i=((e,l)=>{const t=t=>{const n=e.parentElement||document.body,s=n.offsetWidth,a=n.offsetHeight,i=document.documentElement.clientWidth,o=document.documentElement.clientHeight,r=t.offsetX,c=t.offsetY,u=e=>{let t=(e.pageX||e.clientX+document.body.scrollLeft-document.body.clientLeft)-r,u=(e.pageY||e.clientY+document.body.scrollTop-document.body.clientTop)-c;t=t<1?1:t<i-s-1?t:i-s-1,u=u<1?1:u<o-a-1?u:o-a-1,l?l(t,u):(n.style.left=t+"px",n.style.top=u+"px")};document.addEventListener("mousemove",u);const d=()=>{document.removeEventListener("mousemove",u),e.removeEventListener("mouseup",d)};e.addEventListener("mouseup",d)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}})(a.value,((e,l)=>{o.left=e+"px",o.top=l+"px"}))})),p((()=>{i()})),m((()=>e.visible),(e=>{e?(n.value.push("zoom-in"),t.value=e,k((()=>{const e=s.value.offsetWidth/2,l=s.value.offsetHeight/2,t=document.documentElement.clientWidth/2,n=document.documentElement.clientHeight/2;o.left=t-e+"px",o.top=n-l+"px"})),setTimeout((()=>{n.value=n.value.filter((e=>"zoom-in"!==e))}),140)):(n.value.push("zoom-out"),setTimeout((()=>{n.value=n.value.filter((e=>"zoom-out"!==e)),t.value=e}),130))})),()=>{const i=P({ctx:l}),r=P({props:e,ctx:l},"title");return c(f,{to:e.to},{default:()=>[c("div",{style:{display:t.value?"block":"none"}},[c("div",{class:`${Y}-modal-mask`},null),c("div",{class:`${Y}-modal-wrapper`},[c("div",{class:n.value,style:{left:o.left,top:o.top,width:"number"==typeof e.width?`${e.width}px`:e.width},ref:s},[c("div",{class:`${Y}-modal-header`,ref:a},[c("div",{class:`${Y}-modal-title`},[r||""]),c("div",{class:`${Y}-modal-close`,onClick:l=>{l.stopPropagation(),e.onClosed&&e.onClosed()}},[u("X")])]),c("div",{class:`${Y}-modal-body`},[i])])])])]})}}}),V=r({props:{type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e){const l=y("usedLanguageText"),t=y("editorName"),n=w((()=>{var t,n,s,a;switch(e.type){case"link":return`${null==(t=l.linkModalTips)?void 0:t.title}${null==(n=l.toolbarTips)?void 0:n.link}`;case"image":return`${null==(s=l.linkModalTips)?void 0:s.title}${null==(a=l.toolbarTips)?void 0:a.image}`;default:return""}})),s=v({desc:"",url:""}),a=h();return m((()=>e.type),(l=>{"image"===l&&k((()=>{a.value.addEventListener("change",(()=>{F.emit("uploadImage",a.value.files,e.onOk)}))}))})),()=>c(A,{title:n.value,visible:e.visible,onClosed:e.onCancel,to:e.to},{default:()=>{var n,i,o,r,u,d;return["help"===e.type?c("div",null,null):c($,null,[c("div",{class:`${Y}-form-item`},[c("label",{class:`${Y}-lable`,for:`link-desc-${t}`},[null==(n=l.linkModalTips)?void 0:n.descLable]),c("input",{placeholder:null==(i=l.linkModalTips)?void 0:i.descLablePlaceHolder,class:`${Y}-input`,id:`link-desc-${t}`,type:"text",value:s.desc,onChange:e=>{s.desc=e.target.value}},null)]),c("div",{class:`${Y}-form-item`},[c("label",{class:`${Y}-lable`,for:`link-url-${t}`},[null==(o=l.linkModalTips)?void 0:o.urlLable]),c("input",{placeholder:null==(r=l.linkModalTips)?void 0:r.UrlLablePlaceHolder,class:`${Y}-input`,id:`link-url-${t}`,type:"text",value:s.url,onChange:e=>{s.url=e.target.value}},null)]),c("div",{class:`${Y}-form-item`},[c("button",{class:`${Y}-btn ${"link"===e.type&&Y+"-btn-row"}`,onClick:()=>{e.onOk(s),s.desc="",s.url=""}},[null==(u=l.linkModalTips)?void 0:u.buttonOK]),"image"===e.type&&c($,null,[c("button",{class:`${Y}-btn`,onClick:()=>{a.value.click()}},[null==(d=l.linkModalTips)?void 0:d.buttonUpload]),c("input",{ref:a,accept:"image/*",type:"file",multiple:"true",style:{display:"none"}},null)])])])]}})}}),W=r({name:"MDEditorToolbar",props:{setting:{type:Object,default:()=>({})},updateSetting:{type:Function,default:()=>()=>{}}},setup(e){const l=y("usedLanguageText"),t=y("toolbars"),n=y("editorName"),s=v({title:!1,menu:!1}),a=(e,l)=>{F.emit("replace",e,l)},i=()=>{_.isEnabled?_.isFullscreen?_.exit():_.request():console.error("浏览器不支持全屏")};_.isEnabled&&_.on("change",(()=>{e.updateSetting(!e.setting.fullscreen,"fullscreen")}));const o=v({type:"link",visible:!1});F.on({name:"openModals",callback(e){o.type=e,o.visible=!0}});const r=h(document.body);return d((()=>{r.value=document.getElementById(`${Y}-${n}`)})),()=>{var n,u,d,p,v,h,m,g,b,f,k,y,w,j,C,x,S,E,T,L,P,M,q,K,I,U,H,N,R;return c($,null,[c("div",{class:`${Y}-toolbar`},[c("div",{class:`${Y}-toolbar-left`},[t.includes("bold")&&c("div",{class:`${Y}-toolbar-item`,title:null==(n=l.toolbarTips)?void 0:n.bold,onClick:()=>{a("bold")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-bold"},null)])]),t.includes("underline")&&c("div",{class:`${Y}-toolbar-item`,title:null==(u=l.toolbarTips)?void 0:u.underline,onClick:()=>{a("underline")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-underline"},null)])]),t.includes("italic")&&c("div",{class:`${Y}-toolbar-item`,title:null==(d=l.toolbarTips)?void 0:d.italic,onClick:()=>{a("italic")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-italic"},null)])]),t.includes("strikeThrough")&&c("div",{class:`${Y}-toolbar-item`,title:null==(p=l.toolbarTips)?void 0:p.strikeThrough,onClick:()=>{a("strikeThrough")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-strike-through"},null)])]),c(D,null,null),t.includes("title")&&c(O,{visible:s.title,onChange:e=>{s.title=e},to:r.value,overlay:c("ul",{class:`${Y}-menu`,onClick:()=>{s.title=!1}},[c("li",{class:`${Y}-menu-item`,onClick:()=>{a("h1")}},[null==(v=l.titleItem)?void 0:v.h1]),c("li",{class:`${Y}-menu-item`,onClick:()=>{a("h2")}},[null==(h=l.titleItem)?void 0:h.h2]),c("li",{class:`${Y}-menu-item`,onClick:()=>{a("h3")}},[null==(m=l.titleItem)?void 0:m.h3]),c("li",{class:`${Y}-menu-item`,onClick:()=>{a("h4")}},[null==(g=l.titleItem)?void 0:g.h4]),c("li",{class:`${Y}-menu-item`,onClick:()=>{a("h5")}},[null==(b=l.titleItem)?void 0:b.h5]),c("li",{class:`${Y}-menu-item`,onClick:()=>{a("h6")}},[null==(f=l.titleItem)?void 0:f.h6])])},{default:()=>{var e;return[c("div",{class:`${Y}-toolbar-item`,title:null==(e=l.toolbarTips)?void 0:e.title},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-title"},null)])])]}}),t.includes("sub")&&c("div",{class:`${Y}-toolbar-item`,title:null==(k=l.toolbarTips)?void 0:k.sub,onClick:()=>{a("sub")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-sub"},null)])]),t.includes("sup")&&c("div",{class:`${Y}-toolbar-item`,title:null==(y=l.toolbarTips)?void 0:y.sup,onClick:()=>{a("sup")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-sup"},null)])]),t.includes("quote")&&c("div",{class:`${Y}-toolbar-item`,title:null==(w=l.toolbarTips)?void 0:w.quote,onClick:()=>{a("quote")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-quote"},null)])]),t.includes("unorderedList")&&c("div",{class:`${Y}-toolbar-item`,title:null==(j=l.toolbarTips)?void 0:j.unorderedList,onClick:()=>{a("unorderedList")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-unordered-list"},null)])]),t.includes("orderedList")&&c("div",{class:`${Y}-toolbar-item`,title:null==(C=l.toolbarTips)?void 0:C.orderedList,onClick:()=>{a("orderedList")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-ordered-list"},null)])]),c(D,null,null),t.includes("codeRow")&&c("div",{class:`${Y}-toolbar-item`,title:null==(x=l.toolbarTips)?void 0:x.codeRow,onClick:()=>{a("codeRow")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-code-row"},null)])]),t.includes("code")&&c("div",{class:`${Y}-toolbar-item`,title:null==(S=l.toolbarTips)?void 0:S.code,onClick:()=>{a("code")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-code"},null)])]),t.includes("link")&&c("div",{class:`${Y}-toolbar-item`,title:null==(E=l.toolbarTips)?void 0:E.link,onClick:()=>{o.type="link",o.visible=!0}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-link"},null)])]),t.includes("image")&&c("div",{class:`${Y}-toolbar-item`,title:null==(T=l.toolbarTips)?void 0:T.image,onClick:()=>{o.type="image",o.visible=!0}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-image"},null)])]),t.includes("table")&&c("div",{class:`${Y}-toolbar-item`,title:null==(L=l.toolbarTips)?void 0:L.table,onClick:()=>{a("table")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-table"},null)])]),c(D,null,null),t.includes("revoke")&&c("div",{class:`${Y}-toolbar-item`,title:null==(P=l.toolbarTips)?void 0:P.revoke,onClick:()=>{F.emit("ctrlZ")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-revoke"},null)])]),t.includes("next")&&c("div",{class:`${Y}-toolbar-item`,title:null==(M=l.toolbarTips)?void 0:M.next,onClick:()=>{F.emit("ctrlShiftZ")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-next"},null)])]),t.includes("save")&&c("div",{class:`${Y}-toolbar-item`,title:null==(q=l.toolbarTips)?void 0:q.save,onClick:()=>{F.emit("onSave")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-baocun"},null)])])]),c("div",{class:`${Y}-toolbar-right`},[t.includes("prettier")&&c("div",{class:`${Y}-toolbar-item`,title:null==(K=l.toolbarTips)?void 0:K.prettier,onClick:()=>{a("prettier")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-prettier"},null)])]),t.includes("pageFullscreen")&&!e.setting.fullscreen&&c("div",{class:`${Y}-toolbar-item`,title:null==(I=l.toolbarTips)?void 0:I.pageFullscreen,onClick:()=>{e.updateSetting(!e.setting.pageFullScreen,"pageFullScreen")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-"+(e.setting.pageFullScreen?"suoxiao":"fangda")},null)])]),t.includes("fullscreen")&&c("div",{class:`${Y}-toolbar-item`,title:null==(U=l.toolbarTips)?void 0:U.fullscreen,onClick:i},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-"+(e.setting.fullscreen?"fullScreen-exit":"fullScreen")},null)])]),t.includes("preview")&&c("div",{class:`${Y}-toolbar-item`,title:null==(H=l.toolbarTips)?void 0:H.preview,onClick:()=>{e.updateSetting(!e.setting.preview,"preview")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-preview"},null)])]),t.includes("htmlPreview")&&c("div",{class:`${Y}-toolbar-item`,title:null==(N=l.toolbarTips)?void 0:N.htmlPreview,onClick:()=>{e.updateSetting(!e.setting.htmlPreview,"htmlPreview")}},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-coding"},null)])]),t.includes("github")&&c("div",{class:`${Y}-toolbar-item`,title:null==(R=l.toolbarTips)?void 0:R.github,onClick:()=>((e,l={newWindow:!0,nofollow:!0})=>{e||console.warn("无效的链接！");const t=document.createElement("a");t.href=e,t.style.display="none",l.newWindow&&(t.target="_blank"),l.nofollow&&(t.rel="noopener noreferrer"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})("https://github.com/imzbf/md-editor-v3")},[c("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[c("use",{"xlink:href":"#icon-github"},null)])])])]),c(V,{visible:o.visible,type:o.type,onCancel:()=>{o.visible=!1},onOk:e=>{e&&a(o.type,{desc:e.desc,url:e.url}),o.visible=!1},to:r.value},null)])}}});const Z=()=>{document.querySelectorAll(`.${Y}-preview-wrapper pre`).forEach((e=>{const l=document.createElement("span");l.setAttribute("class","copy-button"),l.innerText="复制代码",l.addEventListener("click",(()=>{C(e.querySelector("code").innerText)})),e.appendChild(l)}))};var X=r({name:"MDEditorContent",props:{value:{type:String,default:""},hljs:{type:Object,default:null},onChange:{type:Function,default:()=>()=>{}},setting:{type:Object,default:()=>({})}},setup(e){const l=h(null!==e.hljs),t=y("highlight"),n=h();let s="";const a=h(),i=h();e.hljs&&j.setOptions({highlight:l=>e.hljs.highlightAuto(l).value}),d((()=>{var l,t;Z(),null==(l=n.value)||l.addEventListener("select",(()=>{var e;s=(null==(e=window.getSelection())?void 0:e.toString())||""})),null==(t=n.value)||t.addEventListener("keypress",(l=>{var t,s,a;if("Enter"===l.key){const i=null==(t=n.value)?void 0:t.selectionStart,o=null==(s=n.value)?void 0:s.value.substring(0,i),r=null==(a=n.value)?void 0:a.value.substring(i),c=null==o?void 0:o.lastIndexOf("\n"),u=null==o?void 0:o.substring(c+1,i);if(/^\d+\.\s|^-\s/.test(u))if(l.cancelBubble=!0,l.preventDefault(),l.stopPropagation(),/^\d+\.\s+$|^-\s+$/.test(u)){const l=null==o?void 0:o.replace(new RegExp(u+"$"),"");e.onChange(l+r),M(n.value,null==l?void 0:l.length)}else if(/^-\s+.+/.test(u))e.onChange(q(n.value,"\n- ",{}));else{const l=null==u?void 0:u.match(/\d+(?=\.)/),t=l&&Number(l[0])+1||1;e.onChange(q(n.value,`\n${t}. `,{}))}}})),F.on({name:"replace",callback(l,t){e.onChange(((e,l="",t,n)=>{let s="",a=0,i=0,o=!1;if(/^h[1-6]{1}$/.test(e)){const t=e.replace(/^h(\d)/,((e,l)=>new Array(Number(l)).fill("#",0,l).join("")));s=`${t} ${l}`,a=t.length+1}else{if("prettier"===e)return window.prettier.format(t.value,{parser:"markdown",plugins:window.prettierPlugins});switch(e){case"bold":s=`**${l}**`,a=2,i=-2;break;case"underline":s=`<u>${l}</u>`,a=3,i=-4;break;case"italic":s=`*${l}*`,a=1,i=-1;break;case"strikeThrough":s=`~${l}~`,a=1,i=-1;break;case"sub":s=`<sub>${l}</sub>`,a=5,i=-6;break;case"sup":s=`<sup>${l}</sup>`,a=5,i=-6;break;case"codeRow":s="`"+l+"`",a=1,i=-1;break;case"quote":s=`> ${l}`,a=2;break;case"orderedList":s=`1. ${l}`,a=3;break;case"unorderedList":s=`- ${l}`,a=2;break;case"code":s="```language\n"+l+"\n```\n",a=3,i=11-s.length,o=!0;break;case"table":s="| 表头 | 表头 |\n| - | - |\n| 内容 | 内容 |\n",a=2,i=4-s.length,o=!0;break;case"link":{const{desc:e,url:l}=n;s=`[${e}](${l})`;break}case"image":{const{desc:e,url:l}=n;s=`![${e}](${l})\n`}}}return q(t,s,{deviationStart:a,deviationEnd:i,select:o})})(l,s,n.value,t))}}),K(n.value,a.value||i.value)}));const o=w((()=>l.value?j(e.value):"")),r=()=>{j.setOptions({highlight:e=>window.hljs.highlightAuto(e).value}),l.value=!0,k(Z)};let u=()=>{};return m((()=>e.value),(()=>{k((()=>{Z(),e.setting.preview&&(u=K(n.value,a.value||i.value))}))})),m((()=>e.setting.preview),(e=>{e?k((()=>{u=K(n.value,a.value||i.value)})):u()})),(e=>{const l=y("historyLength");let t=-1;const n={list:[e.value],userUpdated:!0,curr:0};m((()=>e.value),(e=>{clearTimeout(t),t=setTimeout((()=>{n.userUpdated?(n.curr<n.list.length-1&&(n.list=n.list.slice(0,n.curr+1)),n.list.length>l&&n.list.shift(),n.list.push(e),n.curr=n.list.length-1):n.userUpdated=!0}),500)})),F.on({name:"ctrlZ",callback(){n.userUpdated=!1,n.curr=n.curr-1<0?0:n.curr-1,e.onChange(n.list[n.curr])}}),F.on({name:"ctrlShiftZ",callback(){n.userUpdated=!1,n.curr=n.curr+1===n.list.length?n.curr:n.curr+1,e.onChange(n.list[n.curr])}})})(e),()=>c($,null,[c("div",{class:`${Y}-content`},[c("div",{class:[`${Y}-input-wrapper`]},[c("textarea",{ref:n,value:e.value,onInput:l=>{s="",e.onChange(l.target.value)},class:[e.setting.preview||e.setting.htmlPreview?"":"textarea-only"]},null)]),e.setting.preview&&c("div",{ref:a,class:`${Y}-preview-wrapper`,innerHTML:o.value},null),e.setting.htmlPreview&&c("div",{ref:i,class:`${Y}-html-wrapper`},[o.value])]),null===e.hljs&&c(f,{to:document.head},{default:()=>[c("link",{rel:"stylesheet",href:t.css},null),c("script",{src:t.js,onLoad:r},null)]})])}});const Y="md";var J=r({name:"MDEditor",props:{modelValue:{type:String,default:""},theme:{type:String,default:"light"},editorClass:{type:String,default:""},hljs:{type:Object,default:null},highlightJs:{type:String,default:"https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/highlight.min.js"},highlightCss:{type:String,default:"https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/styles/atom-one-dark.min.css"},historyLength:{type:Number,default:10},onChange:{type:Function},onSave:{type:Function,default:()=>()=>{}},onUploadImg:{type:Function},pageFullScreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},language:{type:String,default:"zh-CN"},languageUserDefined:{type:Array,default:()=>[]},toolbars:{type:Array,default:["bold","underline","italic","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","codeRow","code","link","image","table","revoke","next","save","prettier","pageFullscreen","fullscreen","preview","htmlPreview","github"]},prettier:{type:Boolean,default:!0},prettierCDN:{type:String,default:"https://unpkg.com/prettier@2.3.2/standalone.js"},prettierMDCDN:{type:String,default:"https://unpkg.com/prettier@2.3.2/parser-markdown.js"},editorName:{type:String,default:"editor"}},setup(e,l){((e,l)=>{F.on({name:"onSave",callback(){e.onSave?e.onSave(e.modelValue):l.emit("onSave",e.modelValue)}});const t=l=>{var t,n,s,a,i,o,r,c,u,d,p,v,h,m,g,b,f,k,y,w,$,j;if(l.ctrlKey||l.metaKey)switch(l.code){case"KeyS":l.shiftKey?(null==(t=e.toolbars)?void 0:t.includes("strikeThrough"))&&F.emit("replace","strikeThrough"):(null==(n=e.toolbars)?void 0:n.includes("save"))&&(F.emit("onSave",e.modelValue),l.preventDefault());break;case"KeyB":(null==(s=e.toolbars)?void 0:s.includes("bold"))&&(F.emit("replace","bold"),l.preventDefault());break;case"KeyU":l.shiftKey?(null==(a=e.toolbars)?void 0:a.includes("unorderedList"))&&(F.emit("replace","unorderedList"),l.preventDefault()):(null==(i=e.toolbars)?void 0:i.includes("underline"))&&(F.emit("replace","underline"),l.preventDefault());break;case"KeyI":l.shiftKey?(null==(o=e.toolbars)?void 0:o.includes("image"))&&(F.emit("openModals","img"),l.preventDefault()):(null==(r=e.toolbars)?void 0:r.includes("italic"))&&(F.emit("replace","italic"),l.preventDefault());break;case"Digit1":(null==(c=e.toolbars)?void 0:c.includes("title"))&&(F.emit("replace","h1"),l.preventDefault());break;case"Digit2":(null==(u=e.toolbars)?void 0:u.includes("title"))&&(F.emit("replace","h2"),l.preventDefault());break;case"Digit3":(null==(d=e.toolbars)?void 0:d.includes("title"))&&(F.emit("replace","h3"),l.preventDefault());break;case"Digit4":(null==(p=e.toolbars)?void 0:p.includes("title"))&&(F.emit("replace","h4"),l.preventDefault());break;case"Digit5":(null==(v=e.toolbars)?void 0:v.includes("title"))&&(F.emit("replace","h5"),l.preventDefault());break;case"Digit6":(null==(h=e.toolbars)?void 0:h.includes("title"))&&(F.emit("replace","h6"),l.preventDefault());break;case"ArrowUp":(null==(m=e.toolbars)?void 0:m.includes("sup"))&&(F.emit("replace","sup"),l.preventDefault());break;case"ArrowDown":(null==(g=e.toolbars)?void 0:g.includes("sub"))&&(F.emit("replace","sub"),l.preventDefault());break;case"KeyQ":F.emit("replace","quote"),l.preventDefault();break;case"KeyO":(null==(b=e.toolbars)?void 0:b.includes("orderedList"))&&(F.emit("replace","orderedList"),l.preventDefault());break;case"KeyC":l.shiftKey?(null==(f=e.toolbars)?void 0:f.includes("code"))&&(F.emit("replace","code"),l.preventDefault()):l.altKey&&(null==(k=e.toolbars)?void 0:k.includes("codeRow"))&&(F.emit("replace","codeRow"),l.preventDefault());break;case"KeyL":(null==(y=e.toolbars)?void 0:y.includes("link"))&&(F.emit("openModals","link"),l.preventDefault());break;case"KeyZ":l.shiftKey?(null==(w=e.toolbars)?void 0:w.includes("next"))&&(F.emit("ctrlShiftZ"),l.preventDefault()):(null==($=e.toolbars)?void 0:$.includes("revoke"))&&(F.emit("ctrlZ"),l.preventDefault());break;case"KeyF":l.shiftKey&&(null==(j=e.toolbars)?void 0:j.includes("prettier"))&&(F.emit("replace","prettier"),l.preventDefault())}},n=e=>{if(e.clipboardData&&e.clipboardData.files.length>0){const l=e.clipboardData.files[0];/image\/.*/.test(l.type)&&(F.emit("uploadImage",[l]),e.preventDefault())}};d((()=>{window.addEventListener("keydown",t),document.addEventListener("paste",n)})),p((()=>{window.removeEventListener("keydown",t),document.removeEventListener("paste",n)}))})(e,l),x("highlight",{js:e.highlightJs,css:e.highlightCss}),x("historyLength",e.historyLength);const t=w((()=>{const l=o(o({},L),e.languageUserDefined);return l[e.language]?l[e.language]:L["zh-CN"]}));x("usedLanguageText",t.value),x("toolbars",e.toolbars),x("editorName",e.editorName),F.on({name:"uploadImage",callback(t,n){const s=e=>{e.forEach((e=>{setTimeout((()=>{F.emit("replace","image",{desc:"",url:e})}),0)})),n&&n()};e.onUploadImg?e.onUploadImg(t,s):l.emit("onUploadImg",t,s)}});const n=v({pageFullScreen:e.pageFullScreen,fullscreen:!1,preview:e.preview,htmlPreview:!e.preview&&e.htmlPreview}),s=(e,l)=>{n[l]=e,"preview"===l&&n.preview?n.htmlPreview=!1:"htmlPreview"===l&&n.htmlPreview&&(n.preview=!1)};return()=>c("div",{id:`${Y}-${e.editorName}`,class:[Y,e.editorClass,"dark"===e.theme&&`${Y}-dark`,n.fullscreen||n.pageFullScreen?`${Y}-fullscreen`:""]},[c(W,{setting:n,updateSetting:s},null),c(X,{hljs:e.hljs,value:e.modelValue,onChange:t=>{e.onChange?e.onChange(t):l.emit("update:modelValue",t)},setting:n},null),c(f,{to:document.head},{default:()=>[c("script",{src:T},null)]}),e.prettier&&c(f,{to:document.head},{default:()=>[c("script",{src:e.prettierCDN},null),c("script",{src:e.prettierMDCDN},null)]})])}});J.install=e=>(e.component(J.name),e);var G=r({props:{theme:String,onChange:{type:Function,default:()=>{}}},setup(e){const l=v({text:"## 二级标题 \n### 三级标题 \n\n## 代码演示 \n\n依照普朗克长度这项单位，目前可观测的宇宙的直径估计值（直径约930亿光年，即8.8 × 1026 米）即为5.4 × 1061倍普朗克长度。[1]，而可观测宇宙体积则为8.4 × 10184立方普朗克长度（普朗克体积）。\n\n```js\nconst data = Object.create({a: 1, b: 2});\n\nconsole.log(data.a);\n```\n\n\n"});return()=>c("div",{class:"project-preview"},[c("div",{class:"container"},[c(J,{theme:e.theme,modelValue:l.text,onChange:e=>l.text=e,onUploadImg:(e,l)=>{console.log(e),l(["https://art-1252753142.cos.ap-chengdu.myqcloud.com/2021/06301522413082599421018280471.png","https://art-1252753142.cos.ap-chengdu.myqcloud.com/2021/06301606102817061001806835437.gif"])}},null)])])}}),Q=r({setup:()=>()=>c("div",{class:"doc"},[c("div",{class:"container"},[c("div",{class:"doc-usage",innerHTML:'<h2 id="1-基本使用">1. 基本使用</h2>\n<p>目前一直在迭代开发，所以尽量安装小版本中最新版本。</p>\n<pre><code class="language-shell">yarn <span class="hljs-keyword">add</span> md-editor-v3\n</code><span class="copy-button">复制代码</span></pre>\n<p>目前 vue3 已经能很友好的使用 jsx 来开发了，对于一些爱好者（比如作者本身），需要考虑兼容一下。</p>\n<p>两种方式开发上区别在于<strong>vue 模板</strong>能很好的支持<code>vue</code>特性，比如指令，内置的双向绑定等；而<strong>jsx 语法</strong>更偏向于<code>react</code>的理念，开发环境来讲 jsx 如果在支持 ts 的环境下，会更友好一些。</p>\n<h3 id="11-在vue模板中使用">1.1 在vue模板中使用</h3>\n<pre><code class="language-js"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">md-editor</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"text"</span> /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="language-javascript">\n<span class="hljs-keyword">import</span> { defineComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">\'vue\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">MdEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">\'md-editor-v3\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">\'md-editor-v3/lib/style.css\'</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({\n  <span class="hljs-attr">components</span>: {\n    <span class="hljs-title class_">MdEditor</span>\n  },\n  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> {\n      <span class="hljs-attr">text</span>: <span class="hljs-string">\'\'</span>\n    };\n  }\n});\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code><span class="copy-button">复制代码</span></pre>\n<h3 id="12-在jsx中使用">1.2 在jsx中使用</h3>\n<pre><code class="language-js"><span class="hljs-keyword">import</span> { defineComponent, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">\'vue\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">MdEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">\'md-editor-v3\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">\'md-editor-v3/lib/style.css\'</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({\n  <span class="hljs-attr">name</span>: <span class="hljs-string">\'MdEditor\'</span>,\n  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">const</span> text = <span class="hljs-title function_">ref</span>(<span class="hljs-string">\'\'</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> (\n      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MdEditor</span> <span class="hljs-attr">modelValue</span>=<span class="hljs-string">{text.value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(v:</span> <span class="hljs-attr">string</span>) =&gt;</span> (text.value = v)} /&gt;</span>\n    );\n  }\n});\n</code><span class="copy-button">复制代码</span></pre>'},null)])])});S(r({setup(){const e=h("light");return()=>c("div",{class:["app","dark"===e.value&&"theme-dark"]},[c(E,{theme:e.value,onChange:l=>e.value=l},null),c("div",{class:"page-body"},[c(G,{theme:e.value,onChange:l=>e.value=l},null),c(Q,null,null)])])}})).mount("#app");
