var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(s,t,n)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,r=(e,s)=>{for(var t in s||(s={}))l.call(s,t)&&i(e,t,s[t]);if(n)for(var t of n(s))a.call(s,t)&&i(e,t,s[t]);return e};import{d as o,c as d,a as c,o as p,b as u,r as h,e as g,w as m,f as v,i as b,T as f,n as j,g as k,h as y,F as w,m as C,E as x,p as T,j as $}from"./vendor.96ab9667.js";var S=o({props:{theme:String,onChange:{type:Function,default:()=>{}}},setup:e=>()=>d("header",{class:"page-header"},[d("section",{class:"container"},[d("h1",{class:"project-name"},[c("md-editor-v3")]),d("p",{class:"project-desc"},[c("Markdown编辑器，基于vue3，使用jsx和typescript语法开发，支持切换主题、prettier美化文本等。")]),d("p",{class:"header-actions"},[d("button",{class:"btn btn-header"},[d("a",{href:"https://github.com/imzbf/md-editor-v3",target:"_blank",title:"md-editor-v3"},[c("GitHub源码")])]),d("button",{class:"btn btn-header",onClick:()=>e.onChange("light")},[c("默认模式")]),d("button",{class:"btn btn-header",onClick:()=>e.onChange("dark")},[c("暗黑模式")])])])])});const L="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/styles/atom-one-dark.min.css",E="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/highlight.min.js",F="https://unpkg.com/prettier@2.3.2/standalone.js",D="https://unpkg.com/prettier@2.3.2/parser-markdown.js",M={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",htmlPreview:"html代码预览",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},linkModalTips:{title:"添加",descLable:"链接描述：",descLablePlaceHolder:"请输入描述...",urlLable:"链接地址：",UrlLablePlaceHolder:"请输入链接...",buttonOK:"确定",buttonUpload:"上传"},copyCode:{text:"复制代码",tips:"已复制"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",htmlPreview:"html preview",github:"source code"},titleItem:{h1:"lv1 heading",h2:"lv2 heading",h3:"lv3 heading",h4:"lv4 heading",h5:"lv5 heading",h6:"lv6 heading"},linkModalTips:{title:"add ",descLable:"desc:",descLablePlaceHolder:"enter a description...",urlLable:"link:",UrlLablePlaceHolder:"enter a link...",buttonOK:"ok",buttonUpload:"upload"},copyCode:{text:"copy",tips:"copied"}}};var P=new class{constructor(){this.pools={}}remove(e,s){const t=this.pools[e];t&&(this.pools[e]=t.filter((e=>e===s)))}on(e){return void 0===this.pools[e.name]&&(this.pools[e.name]=[]),this.pools[e.name].push(e.callback),this.pools[e.name].includes(e.callback)}emit(e,...s){const t=this.pools[e];t&&t.forEach((t=>{try{t(...s)}catch(n){console.error(`${e}监听事件执行异常！`,n)}}))}};var I=o({setup:()=>()=>d("div",{class:`${Y}-divider`},null)});const R=({instance:e,ctx:s,props:t={}},n="default")=>{const l=(null==e?void 0:e.$slots[n])||(null==s?void 0:s.slots[n]);return(l?l(e):"")||t[n]};var _=o({props:{trigger:{type:String,default:"click"},overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e,n){const l=`${Y}-dropdown-hidden`,a=h({overlayClass:[`${Y}-dropdown-overlay`,l],overlayStyle:{}}),i=g(document.body),o=g(document.body),c=(n,l="click")=>{if("click"===l){const n=i.value,l=o.value,p=n.getBoundingClientRect(),u=n.offsetTop,h=n.offsetLeft,g=p.height,m=p.width;a.overlayStyle=(d=r({},a.overlayStyle),c={top:u+g+"px",left:h-l.offsetWidth/2+m/2+"px",marginTop:"10px"},s(d,t(c))),e.onChange(!e.visible)}else e.onChange(!0);var d,c};m((()=>e.visible),(e=>{e?a.overlayClass=a.overlayClass.filter((e=>e!==l)):a.overlayClass.push(l)}));const j=s=>{const t=i.value,n=o.value;t.contains(s.target)||n.contains(s.target)||e.onChange(!1)};return p((()=>{document.addEventListener("click",j)})),u((()=>{document.removeEventListener("click",j)})),()=>{const s=R({ctx:n}),t=R({props:e,ctx:n},"overlay"),l=v(s instanceof Array?s[0]:s,{onClick:c,ref:i}),r=v(t instanceof Array?t[0]:t,{class:a.overlayClass,style:a.overlayStyle,ref:o});return[l,d(f,{to:e.to},"function"==typeof(p=r)||"[object Object]"===Object.prototype.toString.call(p)&&!b(p)?r:{default:()=>[r]})];var p}}});const H=(e,s=0,t=s)=>{e.setSelectionRange?setTimeout((()=>{e.setSelectionRange(s,t),e.focus()}),0):console.log("无法重置光标位置！")},q=(e,s,t)=>{const{deviationStart:n=0,deviationEnd:l=0,direct:a=!1,select:i=!1}=t;let r="";if(e.selectionStart||0===e.selectionStart){const t=e.selectionStart,a=e.selectionEnd||0;r=e.value.substring(0,t)+s+e.value.substring(a,e.value.length),H(e,i?t+n:t+s.length+l,t+s.length+l)}else r+=s;return a&&(e.value=r),r},O=(e,s)=>{const t=e.clientHeight,n=s.clientHeight,l=(e.scrollHeight-t)/(s.scrollHeight-n),a=()=>{s.scrollTo({top:e.scrollTop/l})};return e.removeEventListener("scroll",a),e.addEventListener("scroll",a),()=>{e.removeEventListener("scroll",a)}};var U,N,z,A,B,K,V={exports:{}};
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/U=V,N="undefined"!=typeof window&&void 0!==window.document?window.document:{},z=U.exports,A=function(){for(var e,s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],t=0,n=s.length,l={};t<n;t++)if((e=s[t])&&e[1]in N){for(t=0;t<e.length;t++)l[s[0][t]]=e[t];return l}return!1}(),B={change:A.fullscreenchange,error:A.fullscreenerror},K={request:function(e,s){return new Promise(function(t,n){var l=function(){this.off("change",l),t()}.bind(this);this.on("change",l);var a=(e=e||N.documentElement)[A.requestFullscreen](s);a instanceof Promise&&a.then(l).catch(n)}.bind(this))},exit:function(){return new Promise(function(e,s){if(this.isFullscreen){var t=function(){this.off("change",t),e()}.bind(this);this.on("change",t);var n=N[A.exitFullscreen]();n instanceof Promise&&n.then(t).catch(s)}else e()}.bind(this))},toggle:function(e,s){return this.isFullscreen?this.exit():this.request(e,s)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,s){var t=B[e];t&&N.addEventListener(t,s,!1)},off:function(e,s){var t=B[e];t&&N.removeEventListener(t,s,!1)},raw:A},A?(Object.defineProperties(K,{isFullscreen:{get:function(){return Boolean(N[A.fullscreenElement])}},element:{enumerable:!0,get:function(){return N[A.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(N[A.fullscreenEnabled])}}}),z?U.exports=K:window.screenfull=K):z?U.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};var Z=V.exports;var J=o({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:[Number,String],default:"auto"},onClosed:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e,s){const t=g(e.visible),n=g([`${Y}-modal`]),l=g(),a=g();let i=()=>{};const r=h({left:"0px",top:"0px"});return p((()=>{i=((e,s)=>{const t=t=>{if(t.target!==e)return;const n=e.parentElement||document.body,l=n.offsetWidth,a=n.offsetHeight,i=document.documentElement.clientWidth,r=document.documentElement.clientHeight,o=t.offsetX,d=t.offsetY,c=e=>{let t=(e.pageX||e.clientX+document.body.scrollLeft-document.body.clientLeft)-o,c=(e.pageY||e.clientY+document.body.scrollTop-document.body.clientTop)-d;t=t<1?1:t<i-l-1?t:i-l-1,c=c<1?1:c<r-a-1?c:r-a-1,s?s(t,c):(n.style.left=t+"px",n.style.top=c+"px")};document.addEventListener("mousemove",c);const p=()=>{document.removeEventListener("mousemove",c),e.removeEventListener("mouseup",p)};e.addEventListener("mouseup",p)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}})(a.value,((e,s)=>{r.left=e+"px",r.top=s+"px"}))})),u((()=>{i()})),m((()=>e.visible),(e=>{e?(n.value.push("zoom-in"),t.value=e,j((()=>{const e=l.value.offsetWidth/2,s=l.value.offsetHeight/2,t=document.documentElement.clientWidth/2,n=document.documentElement.clientHeight/2;r.left=t-e+"px",r.top=n-s+"px"})),setTimeout((()=>{n.value=n.value.filter((e=>"zoom-in"!==e))}),140)):(n.value.push("zoom-out"),setTimeout((()=>{n.value=n.value.filter((e=>"zoom-out"!==e)),t.value=e}),130))})),()=>{const i=R({ctx:s}),o=R({props:e,ctx:s},"title");return d(f,{to:e.to},{default:()=>[d("div",{style:{display:t.value?"block":"none"}},[d("div",{class:`${Y}-modal-mask`,onClick:e.onClosed},null),d("div",{class:n.value,style:{left:r.left,top:r.top,width:"number"==typeof e.width?`${e.width}px`:e.width},ref:l},[d("div",{class:`${Y}-modal-header`,ref:a},[d("div",{class:`${Y}-modal-title`},[o||""]),d("div",{class:`${Y}-modal-close`,onClick:s=>{s.stopPropagation(),e.onClosed&&e.onClosed()}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-close"},null)])])]),d("div",{class:`${Y}-modal-body`},[i])])])]})}}}),W=o({props:{type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e){const s=k("usedLanguageText"),t=k("editorName"),n=y((()=>{var t,n,l,a;switch(e.type){case"link":return`${null==(t=s.linkModalTips)?void 0:t.title}${null==(n=s.toolbarTips)?void 0:n.link}`;case"image":return`${null==(l=s.linkModalTips)?void 0:l.title}${null==(a=s.toolbarTips)?void 0:a.image}`;default:return""}})),l=h({desc:"",url:""}),a=g();return m((()=>e.type),(s=>{"image"===s&&j((()=>{a.value.addEventListener("change",(()=>{P.emit("uploadImage",a.value.files,e.onOk)}))}))})),()=>d(J,{title:n.value,visible:e.visible,onClosed:e.onCancel,to:e.to},{default:()=>{var n,i,r,o,c,p;return["help"===e.type?d("div",null,null):d(w,null,[d("div",{class:`${Y}-form-item`},[d("label",{class:`${Y}-lable`,for:`link-desc-${t}`},[null==(n=s.linkModalTips)?void 0:n.descLable]),d("input",{placeholder:null==(i=s.linkModalTips)?void 0:i.descLablePlaceHolder,class:`${Y}-input`,id:`link-desc-${t}`,type:"text",value:l.desc,onChange:e=>{l.desc=e.target.value}},null)]),d("div",{class:`${Y}-form-item`},[d("label",{class:`${Y}-lable`,for:`link-url-${t}`},[null==(r=s.linkModalTips)?void 0:r.urlLable]),d("input",{placeholder:null==(o=s.linkModalTips)?void 0:o.UrlLablePlaceHolder,class:`${Y}-input`,id:`link-url-${t}`,type:"text",value:l.url,onChange:e=>{l.url=e.target.value}},null)]),d("div",{class:`${Y}-form-item`},[d("button",{class:`${Y}-btn ${"link"===e.type&&Y+"-btn-row"}`,onClick:()=>{e.onOk(l),l.desc="",l.url=""}},[null==(c=s.linkModalTips)?void 0:c.buttonOK]),"image"===e.type&&d(w,null,[d("button",{class:`${Y}-btn`,onClick:()=>{a.value.click()}},[null==(p=s.linkModalTips)?void 0:p.buttonUpload]),d("input",{ref:a,accept:"image/*",type:"file",multiple:"true",style:{display:"none"}},null)])])])]}})}}),X=o({name:"MDEditorToolbar",props:{toolbars:{type:Array,default:[]},toolbarsExclude:{type:Array,default:[]},setting:{type:Object,default:()=>({})},updateSetting:{type:Function,default:()=>()=>{}}},setup(e){const s=k("usedLanguageText"),t=k("editorName"),n=h({title:!1,catalog:!1}),l=(e,s)=>{P.emit("replace",e,s)},a=()=>{Z.isEnabled?Z.isFullscreen?Z.exit():Z.request():console.error("浏览器不支持全屏")};Z.isEnabled&&Z.on("change",(()=>{e.updateSetting(!e.setting.fullscreen,"fullscreen")}));const i=h({type:"link",visible:!1});P.on({name:"openModals",callback(e){i.type=e,i.visible=!0}});const r=g(document.body);return p((()=>{r.value=document.getElementById(`${Y}-${t}`)})),()=>{var t,o,c,p,u,h,g,m,v,b,f,j,k,y,C,x,T,$,S,L,E,F,D,M,R,H,q,O,U;const N=e.toolbars,z=e.toolbarsExclude,A=e=>N.includes(e)&&!z.includes(e);return d(w,null,[d("div",{class:`${Y}-toolbar`},[d("div",{class:`${Y}-toolbar-left`},[A("bold")&&d("div",{class:`${Y}-toolbar-item`,title:null==(t=s.toolbarTips)?void 0:t.bold,onClick:()=>{l("bold")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-bold"},null)])]),A("underline")&&d("div",{class:`${Y}-toolbar-item`,title:null==(o=s.toolbarTips)?void 0:o.underline,onClick:()=>{l("underline")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-underline"},null)])]),A("italic")&&d("div",{class:`${Y}-toolbar-item`,title:null==(c=s.toolbarTips)?void 0:c.italic,onClick:()=>{l("italic")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-italic"},null)])]),A("strikeThrough")&&d("div",{class:`${Y}-toolbar-item`,title:null==(p=s.toolbarTips)?void 0:p.strikeThrough,onClick:()=>{l("strikeThrough")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-strike-through"},null)])]),d(I,null,null),A("title")&&d(_,{visible:n.title,onChange:e=>{n.title=e},to:r.value,overlay:d("ul",{class:`${Y}-menu`,onClick:()=>{n.title=!1}},[d("li",{class:`${Y}-menu-item`,onClick:()=>{l("h1")}},[null==(u=s.titleItem)?void 0:u.h1]),d("li",{class:`${Y}-menu-item`,onClick:()=>{l("h2")}},[null==(h=s.titleItem)?void 0:h.h2]),d("li",{class:`${Y}-menu-item`,onClick:()=>{l("h3")}},[null==(g=s.titleItem)?void 0:g.h3]),d("li",{class:`${Y}-menu-item`,onClick:()=>{l("h4")}},[null==(m=s.titleItem)?void 0:m.h4]),d("li",{class:`${Y}-menu-item`,onClick:()=>{l("h5")}},[null==(v=s.titleItem)?void 0:v.h5]),d("li",{class:`${Y}-menu-item`,onClick:()=>{l("h6")}},[null==(b=s.titleItem)?void 0:b.h6])])},{default:()=>{var e;return[d("div",{class:`${Y}-toolbar-item`,title:null==(e=s.toolbarTips)?void 0:e.title},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-title"},null)])])]}}),A("sub")&&d("div",{class:`${Y}-toolbar-item`,title:null==(f=s.toolbarTips)?void 0:f.sub,onClick:()=>{l("sub")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-sub"},null)])]),A("sup")&&d("div",{class:`${Y}-toolbar-item`,title:null==(j=s.toolbarTips)?void 0:j.sup,onClick:()=>{l("sup")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-sup"},null)])]),A("quote")&&d("div",{class:`${Y}-toolbar-item`,title:null==(k=s.toolbarTips)?void 0:k.quote,onClick:()=>{l("quote")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-quote"},null)])]),A("unorderedList")&&d("div",{class:`${Y}-toolbar-item`,title:null==(y=s.toolbarTips)?void 0:y.unorderedList,onClick:()=>{l("unorderedList")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-unordered-list"},null)])]),A("orderedList")&&d("div",{class:`${Y}-toolbar-item`,title:null==(C=s.toolbarTips)?void 0:C.orderedList,onClick:()=>{l("orderedList")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-ordered-list"},null)])]),d(I,null,null),A("codeRow")&&d("div",{class:`${Y}-toolbar-item`,title:null==(x=s.toolbarTips)?void 0:x.codeRow,onClick:()=>{l("codeRow")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-code-row"},null)])]),A("code")&&d("div",{class:`${Y}-toolbar-item`,title:null==(T=s.toolbarTips)?void 0:T.code,onClick:()=>{l("code")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-code"},null)])]),A("link")&&d("div",{class:`${Y}-toolbar-item`,title:null==($=s.toolbarTips)?void 0:$.link,onClick:()=>{i.type="link",i.visible=!0}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-link"},null)])]),A("image")&&d("div",{class:`${Y}-toolbar-item`,title:null==(S=s.toolbarTips)?void 0:S.image,onClick:()=>{i.type="image",i.visible=!0}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-image"},null)])]),A("table")&&d("div",{class:`${Y}-toolbar-item`,title:null==(L=s.toolbarTips)?void 0:L.table,onClick:()=>{l("table")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-table"},null)])]),d(I,null,null),A("revoke")&&d("div",{class:`${Y}-toolbar-item`,title:null==(E=s.toolbarTips)?void 0:E.revoke,onClick:()=>{P.emit("ctrlZ")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-revoke"},null)])]),A("next")&&d("div",{class:`${Y}-toolbar-item`,title:null==(F=s.toolbarTips)?void 0:F.next,onClick:()=>{P.emit("ctrlShiftZ")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-next"},null)])]),A("save")&&d("div",{class:`${Y}-toolbar-item`,title:null==(D=s.toolbarTips)?void 0:D.save,onClick:()=>{P.emit("onSave")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-baocun"},null)])])]),d("div",{class:`${Y}-toolbar-right`},[A("prettier")&&d("div",{class:`${Y}-toolbar-item`,title:null==(M=s.toolbarTips)?void 0:M.prettier,onClick:()=>{l("prettier")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-prettier"},null)])]),A("pageFullscreen")&&!e.setting.fullscreen&&d("div",{class:`${Y}-toolbar-item`,title:null==(R=s.toolbarTips)?void 0:R.pageFullscreen,onClick:()=>{e.updateSetting(!e.setting.pageFullScreen,"pageFullScreen")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-"+(e.setting.pageFullScreen?"suoxiao":"fangda")},null)])]),A("fullscreen")&&d("div",{class:`${Y}-toolbar-item`,title:null==(H=s.toolbarTips)?void 0:H.fullscreen,onClick:a},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-"+(e.setting.fullscreen?"fullScreen-exit":"fullScreen")},null)])]),A("preview")&&d("div",{class:`${Y}-toolbar-item`,title:null==(q=s.toolbarTips)?void 0:q.preview,onClick:()=>{e.updateSetting(!e.setting.preview,"preview")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-preview"},null)])]),A("htmlPreview")&&d("div",{class:`${Y}-toolbar-item`,title:null==(O=s.toolbarTips)?void 0:O.htmlPreview,onClick:()=>{e.updateSetting(!e.setting.htmlPreview,"htmlPreview")}},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-coding"},null)])]),A("github")&&d("div",{class:`${Y}-toolbar-item`,title:null==(U=s.toolbarTips)?void 0:U.github,onClick:()=>((e,s={newWindow:!0,nofollow:!0})=>{e||console.warn("无效的链接！");const t=document.createElement("a");t.href=e,t.style.display="none",s.newWindow&&(t.target="_blank"),s.nofollow&&(t.rel="noopener noreferrer"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})("https://github.com/imzbf/md-editor-v3")},[d("svg",{class:`${Y}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-github"},null)])])])]),d(W,{visible:i.visible,type:i.type,onCancel:()=>{i.visible=!1},onOk:e=>{e&&l(i.type,{desc:e.desc,url:e.url}),i.visible=!1},to:r.value},null)])}}});var G=o({name:"MDEditorContent",props:{value:{type:String,default:""},hljs:{type:Object,default:null},onChange:{type:Function,default:()=>()=>{}},setting:{type:Object,default:()=>({})},onHtmlChanged:{type:Function,default:()=>()=>{}}},setup(e){const s=g(null!==e.hljs),t=k("highlight"),n=g();let l="";const a=g(),i=g();e.hljs&&C.setOptions({highlight:s=>e.hljs.highlightAuto(s).value});const r=k("usedLanguageText");p((()=>{var s,t;null==(s=n.value)||s.addEventListener("select",(()=>{var e;l=(null==(e=window.getSelection())?void 0:e.toString())||""})),null==(t=n.value)||t.addEventListener("keypress",(s=>{var t,l,a;if("Enter"===s.key){const i=null==(t=n.value)?void 0:t.selectionStart,r=null==(l=n.value)?void 0:l.value.substring(0,i),o=null==(a=n.value)?void 0:a.value.substring(i),d=null==r?void 0:r.lastIndexOf("\n"),c=null==r?void 0:r.substring(d+1,i);if(/^\d+\.\s|^-\s/.test(c))if(s.cancelBubble=!0,s.preventDefault(),s.stopPropagation(),/^\d+\.\s+$|^-\s+$/.test(c)){const s=null==r?void 0:r.replace(new RegExp(c+"$"),"");e.onChange(s+o),H(n.value,null==s?void 0:s.length)}else if(/^-\s+.+/.test(c))e.onChange(q(n.value,"\n- ",{}));else{const s=null==c?void 0:c.match(/\d+(?=\.)/),t=s&&Number(s[0])+1||1;e.onChange(q(n.value,`\n${t}. `,{}))}}})),P.on({name:"replace",callback(s,t){e.onChange(((e,s="",t,n)=>{let l="",a=0,i=0,r=!1;if(/^h[1-6]{1}$/.test(e)){const t=e.replace(/^h(\d)/,((e,s)=>new Array(Number(s)).fill("#",0,s).join("")));l=`${t} ${s}`,a=t.length+1}else{if("prettier"===e)return window.prettier.format(t.value,{parser:"markdown",plugins:window.prettierPlugins});switch(e){case"bold":l=`**${s}**`,a=2,i=-2;break;case"underline":l=`<u>${s}</u>`,a=3,i=-4;break;case"italic":l=`*${s}*`,a=1,i=-1;break;case"strikeThrough":l=`~${s}~`,a=1,i=-1;break;case"sub":l=`<sub>${s}</sub>`,a=5,i=-6;break;case"sup":l=`<sup>${s}</sup>`,a=5,i=-6;break;case"codeRow":l="`"+s+"`",a=1,i=-1;break;case"quote":l=`> ${s}`,a=2;break;case"orderedList":l=`1. ${s}`,a=3;break;case"unorderedList":l=`- ${s}`,a=2;break;case"code":l="```language\n"+s+"\n```\n",a=3,i=11-l.length,r=!0;break;case"table":l="| 表头 | 表头 |\n| - | - |\n| 内容 | 内容 |\n",a=2,i=4-l.length,r=!0;break;case"link":{const{desc:e,url:s}=n;l=`[${e}](${s})`;break}case"image":{const{desc:e,url:s}=n;l=`![${e}](${s})\n`}}}return q(t,l,{deviationStart:a,deviationEnd:i,select:r})})(s,l,n.value,t))}})}));const o=y((()=>s.value?C(e.value):""));let c=()=>{};m((()=>o.value),(s=>{e.onHtmlChanged(s),j((()=>{e.setting.preview&&(c=O(n.value,a.value||i.value)),document.querySelectorAll(`.${Y}-preview-wrapper pre`).forEach((e=>{var s;const t=document.createElement("span");t.setAttribute("class","copy-button"),t.innerText=(null==(s=r.copyCode)?void 0:s.text)||"复制代码",t.addEventListener("click",(()=>{var s;x(e.querySelector("code").innerText),t.innerText=(null==(s=r.copyCode)?void 0:s.tips)||"已复制",setTimeout((()=>{var e;t.innerText=(null==(e=r.copyCode)?void 0:e.text)||"复制代码"}),1500)})),e.appendChild(t)}))}))}));const u=()=>{C.setOptions({highlight:e=>window.hljs.highlightAuto(e).value}),s.value=!0};return m((()=>e.setting.preview),(e=>{e?j((()=>{c=O(n.value,a.value||i.value)})):c()})),(e=>{const s=k("historyLength");let t=-1;const n={list:[e.value],userUpdated:!0,curr:0};m((()=>e.value),(e=>{clearTimeout(t),t=setTimeout((()=>{n.userUpdated?(n.curr<n.list.length-1&&(n.list=n.list.slice(0,n.curr+1)),n.list.length>s&&n.list.shift(),n.list.push(e),n.curr=n.list.length-1):n.userUpdated=!0}),500)})),P.on({name:"ctrlZ",callback(){n.userUpdated=!1,n.curr=n.curr-1<0?0:n.curr-1,e.onChange(n.list[n.curr])}}),P.on({name:"ctrlShiftZ",callback(){n.userUpdated=!1,n.curr=n.curr+1===n.list.length?n.curr:n.curr+1,e.onChange(n.list[n.curr])}})})(e),()=>d(w,null,[d("div",{class:`${Y}-content`},[d("div",{class:[`${Y}-input-wrapper`]},[d("textarea",{ref:n,value:e.value,onInput:s=>{l="",e.onChange(s.target.value)},class:[e.setting.preview||e.setting.htmlPreview?"":"textarea-only"]},null)]),e.setting.preview&&d("div",{ref:a,class:`${Y}-preview-wrapper`,innerHTML:o.value},null),e.setting.htmlPreview&&d("div",{ref:i,class:`${Y}-html-wrapper`},[o.value])]),null===e.hljs&&d(f,{to:document.head},{default:()=>[d("link",{rel:"stylesheet",href:t.css},null),d("script",{src:t.js,onLoad:u},null)]})])}});const Y="md";var Q=o({name:"MdEditorV3",props:{modelValue:{type:String,default:""},theme:{type:String,default:"light"},editorClass:{type:String,default:""},hljs:{type:Object,default:null},highlightJs:{type:String,default:E},highlightCss:{type:String,default:L},historyLength:{type:Number,default:10},onChange:{type:Function},onSave:{type:Function,default:()=>()=>{}},onUploadImg:{type:Function},pageFullScreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},language:{type:String,default:"zh-CN"},languageUserDefined:{type:Array,default:()=>[]},toolbars:{type:Array,default:["bold","underline","italic","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","codeRow","code","link","image","table","revoke","next","save","prettier","pageFullscreen","fullscreen","preview","htmlPreview","github"]},toolbarsExclude:{type:Array,default:[]},prettier:{type:Boolean,default:!0},prettierCDN:{type:String,default:F},prettierMDCDN:{type:String,default:D},editorName:{type:String,default:"editor"},onHtmlChanged:{type:Function}},setup(e,s){((e,s)=>{const t=s=>{var t,n;return(null==(t=e.toolbars)?void 0:t.includes(s))&&!(null==(n=e.toolbarsExclude)?void 0:n.includes(s))};P.on({name:"onSave",callback(){e.onSave?e.onSave(e.modelValue):s.emit("onSave",e.modelValue)}});const n=s=>{if(s.ctrlKey||s.metaKey)switch(s.code){case"KeyS":s.shiftKey?t("strikeThrough")&&P.emit("replace","strikeThrough"):t("save")&&(P.emit("onSave",e.modelValue),s.preventDefault());break;case"KeyB":t("bold")&&(P.emit("replace","bold"),s.preventDefault());break;case"KeyU":s.shiftKey?t("unorderedList")&&(P.emit("replace","unorderedList"),s.preventDefault()):t("underline")&&(P.emit("replace","underline"),s.preventDefault());break;case"KeyI":s.shiftKey?t("image")&&(P.emit("openModals","img"),s.preventDefault()):t("italic")&&(P.emit("replace","italic"),s.preventDefault());break;case"Digit1":t("title")&&(P.emit("replace","h1"),s.preventDefault());break;case"Digit2":t("title")&&(P.emit("replace","h2"),s.preventDefault());break;case"Digit3":t("title")&&(P.emit("replace","h3"),s.preventDefault());break;case"Digit4":t("title")&&(P.emit("replace","h4"),s.preventDefault());break;case"Digit5":t("title")&&(P.emit("replace","h5"),s.preventDefault());break;case"Digit6":t("title")&&(P.emit("replace","h6"),s.preventDefault());break;case"ArrowUp":t("sup")&&(P.emit("replace","sup"),s.preventDefault());break;case"ArrowDown":t("sub")&&(P.emit("replace","sub"),s.preventDefault());break;case"KeyQ":P.emit("replace","quote"),s.preventDefault();break;case"KeyO":t("orderedList")&&(P.emit("replace","orderedList"),s.preventDefault());break;case"KeyC":s.shiftKey?t("code")&&(P.emit("replace","code"),s.preventDefault()):s.altKey&&t("codeRow")&&(P.emit("replace","codeRow"),s.preventDefault());break;case"KeyL":t("link")&&(P.emit("openModals","link"),s.preventDefault());break;case"KeyZ":s.shiftKey?t("next")&&(P.emit("ctrlShiftZ"),s.preventDefault()):t("revoke")&&(P.emit("ctrlZ"),s.preventDefault());break;case"KeyF":s.shiftKey&&t("prettier")&&(P.emit("replace","prettier"),s.preventDefault())}},l=e=>{if(e.clipboardData&&e.clipboardData.files.length>0){const s=e.clipboardData.files[0];/image\/.*/.test(s.type)&&(P.emit("uploadImage",[s]),e.preventDefault())}};p((()=>{window.addEventListener("keydown",n),document.addEventListener("paste",l)})),u((()=>{window.removeEventListener("keydown",n),document.removeEventListener("paste",l)}))})(e,s),T("highlight",{js:e.highlightJs,css:e.highlightCss}),T("historyLength",e.historyLength);const t=y((()=>{const s=r(r({},M),e.languageUserDefined);return s[e.language]?s[e.language]:M["zh-CN"]}));T("usedLanguageText",t.value),T("editorName",e.editorName),P.on({name:"uploadImage",callback(t,n){const l=e=>{e.forEach((e=>{setTimeout((()=>{P.emit("replace","image",{desc:"",url:e})}),0)})),n&&n()};e.onUploadImg?e.onUploadImg(t,l):s.emit("onUploadImg",t,l)}});const n=h({pageFullScreen:e.pageFullScreen,fullscreen:!1,preview:e.preview,htmlPreview:!e.preview&&e.htmlPreview}),l=(e,s)=>{n[s]=e,"preview"===s&&n.preview?n.htmlPreview=!1:"htmlPreview"===s&&n.htmlPreview&&(n.preview=!1)};let a=document.body.style.overflow;const i=()=>{n.pageFullScreen||n.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=a};return m((()=>[n.pageFullScreen,n.fullscreen]),i),i(),()=>d("div",{id:`${Y}-${e.editorName}`,class:[Y,e.editorClass,"dark"===e.theme&&`${Y}-dark`,n.fullscreen||n.pageFullScreen?`${Y}-fullscreen`:""]},[d(X,{toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:n,updateSetting:l},null),d(G,{hljs:e.hljs,value:e.modelValue,onChange:t=>{e.onChange?e.onChange(t):s.emit("update:modelValue",t)},setting:n,onHtmlChanged:t=>{e.onHtmlChanged?e.onHtmlChanged(t):s.emit("onHtmlChanged",t)}},null),d(f,{to:document.head},{default:()=>[d("script",{src:"//at.alicdn.com/t/font_2605852_w7w8n7lnf8.js"},null)]}),e.prettier&&d(f,{to:document.head},{default:()=>[d("script",{src:e.prettierCDN},null),d("script",{src:e.prettierMDCDN},null)]})])}});Q.install=e=>(e.component(Q.name,Q),e);var ee=o({props:{theme:String,onChange:{type:Function,default:()=>{}}},setup(e){const s=localStorage.getItem("XHMPGLJIZTDB")||"",t=h({text:s||'## md-editor-v3\n\nMarkdown 编辑器，基于 vue3，使用 jsx 和 typescript 语法开发，支持切换主题、prettier 美化文本等。\n\n## 基本演示\n\n**加粗**，<u>下划线</u>，_斜体_，~删除线~，上标<sup>26</sup>，下标<sub>[1]</sub>，`inline code`，[超链接](https://imbf.cc)\n\n> 引用：世界上没有绝对，只有相对\n\n## 代码演示\n\n```js\nimport { defineComponent, ref } from "vue";\nimport MdEditor from "md-editor-v3";\nimport "md-editor-v3/lib/style.css";\n\n\nexport default defineComponent({\n  name: "MdEditor",\n  setup() {\n    const text = ref("");\n    return () => (\n      <MdEditor modelValue={text.value} onChange={(v: string) => (text.value = v)} />\n    );\n  }\n});\n```\n\n\n## 文本演示\n\n\n依照普朗克长度这项单位，目前可观测的宇宙的直径估计值（直径约 930 亿光年，即 8.8 × 10<sup>26</sup> 米）即为 5.4 × 10<sup>61</sup>倍普朗克长度。而可观测宇宙体积则为 8.4 × 10<sup>184</sup>立方普朗克长度（普朗克体积）。\n\n\n## 表格演示\n\n\n| 昵称 | 猿龄（年） | 来自      |\n| ---- | ---------- | --------- |\n| 之间 | 3          | 中国-重庆 |\n\n\n## 占个坑@！\n'});let n=-1;return p((()=>{n=window.setInterval((()=>{localStorage.setItem("XHMPGLJIZTDB",t.text)}),1e4)})),u((()=>{clearInterval(n)})),()=>d("div",{class:"project-preview"},[d("div",{class:"container"},[d(Q,{theme:e.theme,modelValue:t.text,onSave:e=>{localStorage.setItem("XHMPGLJIZTDB",e)},onChange:e=>t.text=e,onUploadImg:(e,s)=>{console.log(e),s(["https://art-1252753142.cos.ap-chengdu.myqcloud.com/2021/06301522413082599421018280471.png","https://art-1252753142.cos.ap-chengdu.myqcloud.com/2021/06301606102817061001806835437.gif"])}},null),d("br",null,null),d("span",{class:"tips-text"},[c("tips：本页上方的编辑器有localstorage保存功能，可手动点击保存触发，编辑器每10秒钟会自己保存一次，可用于一些文档的编辑。下方的文档内容也是使用该编辑器完成~")])])])}}),se=o({setup:()=>(p((()=>{document.querySelectorAll(".doc-usage pre ").forEach((e=>{const s=e.querySelector(".copy-button");s.addEventListener("click",(()=>{x(e.querySelector("code").innerText),s.innerText="已复制！",setTimeout((()=>{s.innerText="复制代码"}),1500)}))}))})),()=>d("div",{class:"doc"},[d("div",{class:"container"},[d("div",{class:"doc-usage",innerHTML:'<h2 id="1-基本使用示例">1. 基本使用示例</h2>\n<p>目前一直在迭代开发，所以尽量安装最新版本。</p>\n<pre><code class="language-shell">yarn <span class="hljs-keyword">add</span> md-editor-v3\n</code><span class="copy-button">复制代码</span></pre>\n<p>目前 vue3 已经能很友好的使用 jsx 来开发了，对于一些爱好者（比如作者本身），需要考虑兼容一下。</p>\n<p>两种方式开发上区别在于<strong>vue 模板</strong>能很好的支持<code>vue</code>特性，比如指令，内置的双向绑定等；而<strong>jsx 语法</strong>更偏向于<code>react</code>的理念，开发环境来讲 jsx 如果在支持 ts 的环境下，会更友好一些。</p>\n<h3 id="11-传统开发模式">1.1 传统开发模式</h3>\n<p>通过直接链接生产版本来使用，下面是一个小 demo：</p>\n<pre><code class="language-js"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>传统开发模式中使用<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/md-editor-v3@1.1.4/lib/style.css"</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> /&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"md-editor-v3"</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">md-editor-v3</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"text"</span> /&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue@3.1.5/dist/vue.global.prod.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/md-editor-v3@1.1.4/lib/md-editor-v3.umd.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n      <span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {\n        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) {\n          <span class="hljs-keyword">return</span> {\n            <span class="hljs-attr">text</span>: <span class="hljs-string">\'Hello Editor!!\'</span>\n          };\n        }\n      };\n      <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(<span class="hljs-title class_">MdEditor</span>V3).<span class="hljs-title function_">mount</span>(<span class="hljs-string">\'#md-editor-v3\'</span>);\n    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code><span class="copy-button">复制代码</span></pre>\n<h3 id="12-模块化的-vue-模板">1.2 模块化的 vue 模板</h3>\n<pre><code class="language-js"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">md-editor</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"text"</span> /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="language-javascript">\n<span class="hljs-keyword">import</span> { defineComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">\'vue\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">MdEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">\'md-editor-v3\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">\'md-editor-v3/lib/style.css\'</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({\n  <span class="hljs-attr">components</span>: {\n    <span class="hljs-title class_">MdEditor</span>\n  },\n  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> {\n      <span class="hljs-attr">text</span>: <span class="hljs-string">\'\'</span>\n    };\n  }\n});\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code><span class="copy-button">复制代码</span></pre>\n<h3 id="13-模块化的-jsx">1.3 模块化的 jsx</h3>\n<pre><code class="language-js"><span class="hljs-keyword">import</span> { defineComponent, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">\'vue\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">MdEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">\'md-editor-v3\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">\'md-editor-v3/lib/style.css\'</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({\n  <span class="hljs-attr">name</span>: <span class="hljs-string">\'MdEditor\'</span>,\n  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">const</span> text = <span class="hljs-title function_">ref</span>(<span class="hljs-string">\'\'</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> (\n      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MdEditor</span> <span class="hljs-attr">modelValue</span>=<span class="hljs-string">{text.value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(v:</span> <span class="hljs-attr">string</span>) =&gt;</span> (text.value = v)} /&gt;</span>\n    );\n  }\n});\n</code><span class="copy-button">复制代码</span></pre>\n<h3 id="14-图片上传">1.4 图片上传</h3>\n<p>默认可以选择多张图片，支持截图粘贴板上传图片，支持复制网页图片粘贴上传。</p>\n<blockquote>\n<p>注意：粘贴板上传时，如果是网页上的 gif 图，无法正确上传为 gif 格式！请保存本地后再手动上传。</p>\n</blockquote>\n<pre><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-title function_">onUploadImg</span>(<span class="hljs-params">files: FileList, callback: (urls: <span class="hljs-built_in">string</span>[]) =&gt; <span class="hljs-built_in">void</span></span>) {\n  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(\n    <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(files).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {\n      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">rev, rej</span>) =&gt;</span> {\n        <span class="hljs-keyword">const</span> form = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();\n        form.<span class="hljs-title function_">append</span>(<span class="hljs-string">\'file\'</span>, file);\n\n        axios\n          .<span class="hljs-title function_">post</span>(<span class="hljs-string">\'/api/img/upload\'</span>, form, {\n            <span class="hljs-attr">headers</span>: {\n              <span class="hljs-string">\'Content-Type\'</span>: <span class="hljs-string">\'multipart/form-data\'</span>\n            }\n          })\n          .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-title function_">rev</span>(res))\n          .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title function_">rej</span>(error));\n      });\n    })\n  );\n\n  <span class="hljs-title function_">callback</span>(res.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">any</span></span>) =&gt;</span> item.<span class="hljs-property">data</span>.<span class="hljs-property">url</span>));\n}\n</code><span class="copy-button">复制代码</span></pre>\n<h2 id="2-props-说明">2. Props 说明</h2>\n<p>这是组件最重要的一部分内容，<code>MdEditorV3</code>的属性参数如下：</p>\n<br>\n\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>类型</th>\n<th>默认值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>modelValue</td>\n<td>String</td>\n<td>\'\'</td>\n<td>编辑器内容，vue 模板支持双向绑定（v-model="value"），jsx 中需结合 onChange 事件使用。</td>\n</tr>\n<tr>\n<td>theme</td>\n<td>\'light\' | \'dark\'</td>\n<td>\'light\'</td>\n<td>主题切换</td>\n</tr>\n<tr>\n<td>editorClass</td>\n<td>String</td>\n<td>\'\'</td>\n<td>将被放到编辑器最外层类中，可用于覆盖某些特定的样式。</td>\n</tr>\n<tr>\n<td>hljs</td>\n<td>Object</td>\n<td>null</td>\n<td>项目中使用到了 highlight，可将实例直接传递，生产环境则不会请求 CDN，需要手动导入支持的高亮代码样式，参考：<a href="https://www.jsdelivr.com/package/npm/highlight.js?path=styles">代码样式传送门</a>。</td>\n</tr>\n<tr>\n<td>highlightJs</td>\n<td>String</td>\n<td><a href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/highlight.min.js">highlight.js</a></td>\n<td>highlightJs CDN 链接。</td>\n</tr>\n<tr>\n<td>highlightCss</td>\n<td>String</td>\n<td><a href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/styles/atom-one-dark.min.css">atom-one-dark</a></td>\n<td>预览高亮代码样式，更多参考上方<strong>代码样式传送门</strong>。</td>\n</tr>\n<tr>\n<td>historyLength</td>\n<td>Number</td>\n<td>10</td>\n<td>最大记录操作数，默认只记录最近 10 条输入。</td>\n</tr>\n<tr>\n<td>pageFullScreen</td>\n<td>Boolean</td>\n<td>false</td>\n<td>页面内全屏。</td>\n</tr>\n<tr>\n<td>preview</td>\n<td>Boolean</td>\n<td>true</td>\n<td>预览模式，左右分栏，左边为编辑器，右边为内容预览。</td>\n</tr>\n<tr>\n<td>htmlPreview</td>\n<td>Boolean</td>\n<td>false</td>\n<td>直接显示 编译后的 html 源代码（选中复制该内容不能完全展示，因为换行符被忽略了，要获取 html 代码请使用下面的监听事件）。</td>\n</tr>\n<tr>\n<td>language</td>\n<td>String</td>\n<td>\'zh-CN\'</td>\n<td>内置中英文(\'zh-CN\',\'en-US\')，可自行扩展其他语言，同时可覆盖内置的中英文。</td>\n</tr>\n<tr>\n<td>languageUserDefined</td>\n<td>Array</td>\n<td>[{key: StaticTextDefaultValue}]</td>\n<td>通过这里扩展语言，修改 language 值为扩展 key 即可，类型申明可手动导入</td>\n</tr>\n<tr>\n<td>toolbars</td>\n<td>Array</td>\n<td>[all]</td>\n<td>选择性展示工具栏，可选内容如下<sup>[toolbars]<sup></sup></sup></td>\n</tr>\n<tr>\n<td>toolbarsExclude<sup>v1.1.4</sup></td>\n<td>Array</td>\n<td>[]</td>\n<td>选择性不展示工具栏，内容同<code>toolbars</code></td>\n</tr>\n<tr>\n<td>prettier</td>\n<td>Boolean</td>\n<td>true</td>\n<td>是否启用 prettier 优化 md 内容</td>\n</tr>\n<tr>\n<td>prettierCDN</td>\n<td>String</td>\n<td><a href="https://unpkg.com/prettier@2.3.2/standalone.js">standalone</a></td>\n<td></td>\n</tr>\n<tr>\n<td>prettierMDCDN</td>\n<td>String</td>\n<td><a href="https://unpkg.com/prettier@2.3.2/parser-markdown.js">parser-markdown</a></td>\n<td></td>\n</tr>\n<tr>\n<td>editorName</td>\n<td>String</td>\n<td>\'editor\'</td>\n<td>当在同一页面放置了多个编辑器，最好提供该属性以区别某些带有 ID 的内容</td>\n</tr>\n</tbody></table>\n<br>\n\n<blockquote>\n<p>!!! 编辑器内比较大小的扩展均使用了 CDN 链接，在没有外网的情况，请使用扩展属性替换为本地链接，比如：highlightJs = "//xxx.com/highlight.min.js"</p>\n</blockquote>\n<p><strong>工具栏选项</strong></p>\n<pre><code class="language-js"><span class="hljs-string">\'bold\'</span>, <span class="hljs-string">\'underline\'</span>, <span class="hljs-string">\'italic\'</span>, <span class="hljs-string">\'strikeThrough\'</span>, <span class="hljs-string">\'sub\'</span>, <span class="hljs-string">\'sup\'</span>, <span class="hljs-string">\'quote\'</span>, <span class="hljs-string">\'unorderedList\'</span>,\n<span class="hljs-string">\'orderedList\'</span>, <span class="hljs-string">\'codeRow\'</span>, <span class="hljs-string">\'code\'</span>, <span class="hljs-string">\'link\'</span>, <span class="hljs-string">\'image\'</span>, <span class="hljs-string">\'table\'</span>, <span class="hljs-string">\'revoke\'</span>, <span class="hljs-string">\'next\'</span>, <span class="hljs-string">\'save\'</span>,\n<span class="hljs-string">\'pageFullscreen\'</span>, <span class="hljs-string">\'fullscreen\'</span>, <span class="hljs-string">\'preview\'</span>, <span class="hljs-string">\'htmlPreview\'</span>, <span class="hljs-string">\'github\'</span>\n\n<span class="hljs-comment">// 对应功能名称</span>\n<span class="hljs-string">\'加粗\'</span>, <span class="hljs-string">\'下划线\'</span>, <span class="hljs-string">\'斜体\'</span>, <span class="hljs-string">\'删除线\'</span>, <span class="hljs-string">\'下标\'</span>, <span class="hljs-string">\'上标\'</span>, <span class="hljs-string">\'引用\'</span>, <span class="hljs-string">\'无序列表\'</span>,\n<span class="hljs-string">\'有序列表\'</span>, <span class="hljs-string">\'行内代码\'</span>, <span class="hljs-string">\'块级代码\'</span>, <span class="hljs-string">\'链接\'</span>, <span class="hljs-string">\'图片\'</span>, <span class="hljs-string">\'表格\'</span>, <span class="hljs-string">\'后退一步\'</span>, <span class="hljs-string">\'前进一步\'</span>, <span class="hljs-string">\'保存\'</span>，\n<span class="hljs-string">\'页面内全屏\'</span>, <span class="hljs-string">\'屏幕全屏\'</span>, <span class="hljs-string">\'内容预览\'</span>, <span class="hljs-string">\'html代码预览\'</span>, <span class="hljs-string">\'源码地址\'</span>\n</code><span class="copy-button">复制代码</span></pre>\n<p>自定义语言，可在源码中搜索<code>StaticTextDefaultValue</code>，即可找到类型提示。中文示例（某些字段若不主动提供，可能会造成页面不美观）：</p>\n<pre><code class="language-js">{\n    toolbarTips: {\n      bold: <span class="hljs-string">\'加粗\'</span>,\n      underline: <span class="hljs-string">\'下划线\'</span>,\n      italic: <span class="hljs-string">\'斜体\'</span>,\n      strikeThrough: <span class="hljs-string">\'删除线\'</span>,\n      title: <span class="hljs-string">\'标题\'</span>,\n      sub: <span class="hljs-string">\'下标\'</span>,\n      sup: <span class="hljs-string">\'上标\'</span>,\n      quote: <span class="hljs-string">\'引用\'</span>,\n      unorderedList: <span class="hljs-string">\'无序列表\'</span>,\n      orderedList: <span class="hljs-string">\'有序列表\'</span>,\n      codeRow: <span class="hljs-string">\'行内代码\'</span>,\n      code: <span class="hljs-string">\'块级代码\'</span>,\n      link: <span class="hljs-string">\'链接\'</span>,\n      image: <span class="hljs-string">\'图片\'</span>,\n      table: <span class="hljs-string">\'表格\'</span>,\n      revoke: <span class="hljs-string">\'后退\'</span>,\n      next: <span class="hljs-string">\'前进\'</span>,\n      save: <span class="hljs-string">\'保存\'</span>,\n      prettier: <span class="hljs-string">\'美化\'</span>,\n      pageFullscreen: <span class="hljs-string">\'浏览器全屏\'</span>,\n      fullscreen: <span class="hljs-string">\'屏幕全屏\'</span>,\n      preview: <span class="hljs-string">\'预览\'</span>,\n      htmlPreview: <span class="hljs-string">\'html代码预览\'</span>,\n      github: <span class="hljs-string">\'源码地址\'</span>\n    },\n    titleItem: {\n      h1: <span class="hljs-string">\'一级标题\'</span>,\n      h2: <span class="hljs-string">\'二级标题\'</span>,\n      h3: <span class="hljs-string">\'三级标题\'</span>,\n      h4: <span class="hljs-string">\'四级标题\'</span>,\n      h5: <span class="hljs-string">\'五级标题\'</span>,\n      h6: <span class="hljs-string">\'六级标题\'</span>\n    },\n    linkModalTips: {\n      title: <span class="hljs-string">\'添加\'</span>,\n      descLable: <span class="hljs-string">\'链接描述：\'</span>,\n      descLablePlaceHolder: <span class="hljs-string">\'请输入描述...\'</span>,\n      urlLable: <span class="hljs-string">\'链接地址：\'</span>,\n      UrlLablePlaceHolder: <span class="hljs-string">\'请输入链接...\'</span>,\n      buttonOK: <span class="hljs-string">\'确定\'</span>,\n      buttonUpload: <span class="hljs-string">\'上传\'</span>\n    },\n    // v1.<span class="hljs-number">1.4</span>新增\n    copyCode: {\n      text: <span class="hljs-string">\'复制代码\'</span>;\n      tips: <span class="hljs-string">\'已复制\'</span>;\n    }\n  }\n</code><span class="copy-button">复制代码</span></pre>\n<h2 id="3-绑定事件">3. 绑定事件</h2>\n<p>目前支持的内容如下：</p>\n<br>\n\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>入参</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onChange</td>\n<td>v:String</td>\n<td>内容变化事件（当前与<code>textare</code>的<code>oninput</code>事件绑定，每输入一个单字即会触发）</td>\n</tr>\n<tr>\n<td>onSave</td>\n<td>v:String</td>\n<td>保存事件，快捷键与保存按钮均会触发</td>\n</tr>\n<tr>\n<td>onUploadImg</td>\n<td>files:FileList, callback:Function</td>\n<td>上传图片事件，弹窗会等待上传结果，务必将上传后的 urls 作为 callback 入参回传</td>\n</tr>\n<tr>\n<td>onHtmlChanged</td>\n<td>h:String</td>\n<td>html 变化回调事件，用于获取预览 html 代码</td>\n</tr>\n</tbody></table>\n<br>\n\n<h2 id="4-快捷键使用">4. 快捷键使用</h2>\n<p>目前除了<code>CTRL + T</code>与浏览器冲突意外，其余的都绑定了相应的快捷键。</p>\n<p>主要以<code>CTRL</code>搭配对应功能英文单词首字母，冲突项添加<code>SHIFT</code>，再冲突替换为<code>ALT</code>。</p>\n<table>\n<thead>\n<tr>\n<th>键位</th>\n<th>功能</th>\n<th>说明</th>\n<th>开发标记</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>CTRL + S</td>\n<td>保存</td>\n<td>触发编辑器的<code>onSave</code>回调</td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + B</td>\n<td>加粗</td>\n<td><code>**加粗**</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + U</td>\n<td>下划线</td>\n<td><code>&lt;u&gt;下划线&lt;/u&gt;</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + I</td>\n<td>斜体</td>\n<td><code>*斜体*</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + 1-6</td>\n<td>1-6 级标题</td>\n<td><code># 标题</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + ↑</td>\n<td>上角标</td>\n<td><code>&lt;sup&gt;上角标&lt;/sup&gt;</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + ↓</td>\n<td>下角标</td>\n<td><code>&lt;sub&gt;下角标&lt;/sub&gt;</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + Q</td>\n<td>引用</td>\n<td><code>&gt; 引用</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + O</td>\n<td>有序列表</td>\n<td><code>1. 有序列表</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + L</td>\n<td>链接</td>\n<td><code>[链接](https://imbf.cc)</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + T</td>\n<td>表格</td>\n<td><code>|表格|</code> 放弃开发（无法实现）</td>\n<td>x</td>\n</tr>\n<tr>\n<td>CTRL + Z</td>\n<td>撤回</td>\n<td>触发编辑器内内容撤回，与系统无关</td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + S</td>\n<td>删除线</td>\n<td><code>~删除线~</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + U</td>\n<td>无序列表</td>\n<td><code>- 无序列表</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + C</td>\n<td>块级代码</td>\n<td>多行代码块</td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + I</td>\n<td>图片链接</td>\n<td><code>![图片](https://imbf.cc)</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + Z</td>\n<td>前进一步</td>\n<td>触发编辑器内内容前进，与系统无关</td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + F</td>\n<td>美化内容</td>\n<td></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + ALT + C</td>\n<td>行内代码</td>\n<td>行内代码块</td>\n<td>√</td>\n</tr>\n</tbody></table>\n<h2 id="5-开发理念">5. 开发理念</h2>\n<p>本节介绍编辑器中部分功能的实现。</p>\n<h3 id="51-编辑区">5.1 编辑区</h3>\n<ul>\n<li><p>由于不是富文本编辑器，所以采用了<code>textarea</code>标签作为编辑区。</p>\n</li>\n<li><p>为解决代码插入文本，在我的博客留言板中封装了两个比较实用的方法<code>insert</code>和<code>setPosition</code>，一个用于向光标位置插入特定内容，另一个用于重新定位光标位置，<a href="https://github.com/imzbf/md-editor-v3/blob/master/MdEditor/utils/index.ts">源码位置</a>。</p>\n</li>\n<li><p>编辑器与工具栏的交互，由于没有 vuex，所以内置了<code>EventBus</code>，在不同地方通过这种方式来进行交互。（目前，同一页面嵌入两个编辑器<code>EventBus</code>被共享，暂未修复）。</p>\n</li>\n<li><p>编辑器与快捷键，通过监听每一个按键对应的<code>ctrl</code>、<code>shift</code>等属性是否为<code>true</code>实现，并且均阻止了默认事件触发。在 windows 中以<code>CTRL</code>键为主要触发单元，在 MacOS 中以<code>META</code>键为主。</p>\n</li>\n</ul>\n<h3 id="52-组件：divider">5.2 组件：<strong>Divider</strong></h3>\n<p>分隔符，应用于工具栏中分隔功能模块，美化作用，实现为以宽为<code>1px</code>的元素做衬托。</p>\n<h3 id="53-组件：dropdown">5.3 组件：<strong>Dropdown</strong></h3>\n<p>源码：<a href="https://github.com/imzbf/md-editor-v3/tree/master/MdEditor/components/Dropdown">传送门</a></p>\n<ul>\n<li><p>下拉模块，主要用于下拉菜单使用。该组件将主插槽内容作为触发器，<code>overlay</code>插槽内容作为拉下展示内容，通过 vue 内置的<code>cloneVNode</code>方法克隆组件，以绑定扩展属性及事件，达到了不添加多余的节点的目的；</p>\n</li>\n<li><p>内容插入通过 vue 内置的<code>Teleport</code>组件，将内容插入到编辑器内部（预设的地方），不会污染全局结构；</p>\n</li>\n<li><p>在卸载对应组件时，<code>onUnmounted</code>方法会主动卸载绑定事件。</p>\n</li>\n</ul>\n<h3 id="54-组件：modal">5.4 组件：Modal</h3>\n<p>源码：<a href="https://github.com/imzbf/md-editor-v3/tree/master/MdEditor/components/Modal">传送门</a></p>\n<ul>\n<li>作为弹窗模块使用，实现与<strong>Dropdown</strong>大为相似，默认了显示动画及居中位置；</li>\n<li>这里加入了一个新特性，在显示弹窗时，可以通过点击弹窗标题移动弹框。</li>\n</ul>\n<p>封装的移动元素<a href="https://github.com/imzbf/md-editor-v3/blob/master/MdEditor/utils/dom.ts">代码</a>，优化了正确解绑事件，该方法针对了触发器实现，单一窗口并不通用。</p>\n<h3 id="55-主题模式">5.5 主题模式</h3>\n<p>内置了暗黑和默认模式，两种模式由内部<code>theme</code>属性控制，由于<code>antd</code>中以<code>less</code>修改变量值达到切换主题的方式依赖项较多，并未采用，实现则是最基础的两种主题两个类名的方式。</p>\n<h2 id="结尾">结尾</h2>\n<p>若有觉得可用的功能或发现编辑器的 Bug，请通过以下方式反馈给我，让我们共同进步。</p>\n<ol>\n<li>邮箱：<a href="mailto:zbfcqtl@163.com">zbfcqtl@163.com</a></li>\n<li>博客留言：<a href="https://imbf.cc">imbf.cc</a></li>\n<li>issue 管理：<a href="https://github.com/imzbf/md-editor-v3/issues">github issues</a></li>\n</ol>'},null)])]))});$(o({setup(){const e=g("light");return()=>d("div",{class:["app","dark"===e.value&&"theme-dark"]},[d(S,{theme:e.value,onChange:s=>e.value=s},null),d("div",{class:"page-body"},[d(ee,{theme:e.value,onChange:s=>e.value=s},null),d(se,null,null)])])}})).mount("#app");
