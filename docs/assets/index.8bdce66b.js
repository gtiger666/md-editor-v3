var e=Object.defineProperty,l=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(l,t,n)=>t in l?e(l,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[t]=n,s=(e,l)=>{for(var t in l||(l={}))i.call(l,t)&&r(e,t,l[t]);if(n)for(var t of n(l))o.call(l,t)&&r(e,t,l[t]);return e};import{d as a,c as u,a as c,o as d,b as p,r as v,e as h,w as m,f as b,i as g,T as f,n as k,g as y,h as w,F as $,m as C,j as x,p as S,k as T}from"./vendor.c7c14d0f.js";var E=a({setup:()=>()=>u("header",{class:"header"},[u("section",{class:"container"},[u("h1",null,[c("md-editor-v3")]),u("p",null,[c("Markdown编辑器，基于vue3，使用jsx和typescript语法开发，支持切换主题、prettier美化文本等。")])])])}),L="//at.alicdn.com/t/font_2605852_w2rq8ip7vg.js";const F={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",codeRow:"行内代码",code:"会计代码",link:"链接",image:"图片",table:"表格",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",htmlPreview:"html代码预览",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},linkModalTips:{title:"添加",descLable:"链接描述：",descLablePlaceHolder:"请输入描述...",urlLable:"链接地址：",UrlLablePlaceHolder:"请输入链接...",buttonOK:"确定",buttonUpload:"上传"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",htmlPreview:"html preview",github:"source code"},titleItem:{h1:"lv1 heading",h2:"lv2 heading",h3:"lv3 heading",h4:"lv4 heading",h5:"lv5 heading",h6:"lv6 heading"},linkModalTips:{title:"add ",descLable:"desc:",descLablePlaceHolder:"enter a description...",urlLable:"link:",UrlLablePlaceHolder:"enter a link...",buttonOK:"ok",buttonUpload:"upload"}}};var D=new class{constructor(){this.pools={}}remove(e,l){const t=this.pools[e];t&&(this.pools[e]=t.filter((e=>e===l)))}on(e){return void 0===this.pools[e.name]&&(this.pools[e.name]=[]),this.pools[e.name].push(e.callback),this.pools[e.name].includes(e.callback)}emit(e,...l){const t=this.pools[e];t&&t.forEach((t=>{try{t(...l)}catch(n){console.error(`${e}监听事件执行异常！`,n)}}))}};var j=a({setup:()=>()=>u("div",{class:`${_}-divider`},null)});const P=({instance:e,ctx:l,props:t={}},n="default")=>{const i=(null==e?void 0:e.$slots[n])||(null==l?void 0:l.slots[n]);return(i?i(e):"")||t[n]};var O=a({props:{trigger:{type:String,default:"click"},overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e,n){const i=`${_}-dropdown-hidden`,o=v({overlayClass:[`${_}-dropdown-overlay`,i],overlayStyle:{}}),r=h(document.body),a=h(document.body),c=(n,i="click")=>{if("click"===i){const n=r.value,i=a.value,d=n.getBoundingClientRect(),p=n.offsetTop,v=n.offsetLeft,h=d.height,m=d.width;o.overlayStyle=(u=s({},o.overlayStyle),c={top:p+h+"px",left:v-i.offsetWidth/2+m/2+"px",marginTop:"10px"},l(u,t(c))),e.onChange(!e.visible)}else e.onChange(!0);var u,c};m((()=>e.visible),(e=>{e?o.overlayClass=o.overlayClass.filter((e=>e!==i)):o.overlayClass.push(i)}));const k=l=>{const t=r.value,n=a.value;t.contains(l.target)||n.contains(l.target)||e.onChange(!1)};return d((()=>{document.addEventListener("click",k)})),p((()=>{document.removeEventListener("click",k)})),()=>{const l=P({ctx:n}),t=P({props:e,ctx:n},"overlay"),i=b(l instanceof Array?l[0]:l,{onClick:c,ref:r}),s=b(t instanceof Array?t[0]:t,{class:o.overlayClass,style:o.overlayStyle,ref:a});return[i,u(f,{to:e.to},"function"==typeof(d=s)||"[object Object]"===Object.prototype.toString.call(d)&&!g(d)?s:{default:()=>[s]})];var d}}});const q=(e,l=0,t=l)=>{e.setSelectionRange?setTimeout((()=>{e.setSelectionRange(l,t),e.focus()}),0):console.log("无法重置光标位置！")},K=(e,l,t)=>{const{deviationStart:n=0,deviationEnd:i=0,direct:o=!1,select:r=!1}=t;let s="";if(e.selectionStart||0===e.selectionStart){const t=e.selectionStart,o=e.selectionEnd||0;s=e.value.substring(0,t)+l+e.value.substring(o,e.value.length),q(e,r?t+n:t+l.length+i,t+l.length+i)}else s+=l;return o&&(e.value=s),s},M=(e,l)=>{const t=e.clientHeight,n=l.clientHeight,i=(e.scrollHeight-t)/(l.scrollHeight-n),o=()=>{l.scrollTo({top:e.scrollTop/i})};return e.removeEventListener("scroll",o),e.addEventListener("scroll",o),()=>{e.removeEventListener("scroll",o)}};var I,U,N,R,H,z,B={exports:{}};
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/I=B,U="undefined"!=typeof window&&void 0!==window.document?window.document:{},N=I.exports,R=function(){for(var e,l=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],t=0,n=l.length,i={};t<n;t++)if((e=l[t])&&e[1]in U){for(t=0;t<e.length;t++)i[l[0][t]]=e[t];return i}return!1}(),H={change:R.fullscreenchange,error:R.fullscreenerror},z={request:function(e,l){return new Promise(function(t,n){var i=function(){this.off("change",i),t()}.bind(this);this.on("change",i);var o=(e=e||U.documentElement)[R.requestFullscreen](l);o instanceof Promise&&o.then(i).catch(n)}.bind(this))},exit:function(){return new Promise(function(e,l){if(this.isFullscreen){var t=function(){this.off("change",t),e()}.bind(this);this.on("change",t);var n=U[R.exitFullscreen]();n instanceof Promise&&n.then(t).catch(l)}else e()}.bind(this))},toggle:function(e,l){return this.isFullscreen?this.exit():this.request(e,l)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,l){var t=H[e];t&&U.addEventListener(t,l,!1)},off:function(e,l){var t=H[e];t&&U.removeEventListener(t,l,!1)},raw:R},R?(Object.defineProperties(z,{isFullscreen:{get:function(){return Boolean(U[R.fullscreenElement])}},element:{enumerable:!0,get:function(){return U[R.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(U[R.fullscreenEnabled])}}}),N?I.exports=z:window.screenfull=z):N?I.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};var A=B.exports;var V=a({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:[Number,String],default:"auto"},onClosed:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e,l){const t=h(e.visible),n=h([`${_}-modal`]),i=h(),o=h();let r=()=>{};const s=v({left:"0px",top:"0px"});return d((()=>{r=((e,l)=>{const t=t=>{const n=e.parentElement||document.body,i=n.offsetWidth,o=n.offsetHeight,r=document.documentElement.clientWidth,s=document.documentElement.clientHeight,a=t.offsetX,u=t.offsetY,c=e=>{let t=(e.pageX||e.clientX+document.body.scrollLeft-document.body.clientLeft)-a,c=(e.pageY||e.clientY+document.body.scrollTop-document.body.clientTop)-u;t=t<1?1:t<r-i-1?t:r-i-1,c=c<1?1:c<s-o-1?c:s-o-1,l?l(t,c):(n.style.left=t+"px",n.style.top=c+"px")};document.addEventListener("mousemove",c);const d=()=>{document.removeEventListener("mousemove",c),e.removeEventListener("mouseup",d)};e.addEventListener("mouseup",d)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}})(o.value,((e,l)=>{s.left=e+"px",s.top=l+"px"}))})),p((()=>{r()})),m((()=>e.visible),(e=>{e?(n.value.push("zoom-in"),t.value=e,k((()=>{const e=i.value.offsetWidth/2,l=i.value.offsetHeight/2,t=document.documentElement.clientWidth/2,n=document.documentElement.clientHeight/2;s.left=t-e+"px",s.top=n-l+"px"})),setTimeout((()=>{n.value=n.value.filter((e=>"zoom-in"!==e))}),140)):(n.value.push("zoom-out"),setTimeout((()=>{n.value=n.value.filter((e=>"zoom-out"!==e)),t.value=e}),130))})),()=>{const r=P({ctx:l}),a=P({props:e,ctx:l},"title");return u(f,{to:e.to},{default:()=>[u("div",{style:{display:t.value?"block":"none"}},[u("div",{class:`${_}-modal-mask`},null),u("div",{class:`${_}-modal-wrapper`},[u("div",{class:n.value,style:{left:s.left,top:s.top,width:"number"==typeof e.width?`${e.width}px`:e.width},ref:i},[u("div",{class:`${_}-modal-header`,ref:o},[u("div",{class:`${_}-modal-title`},[a||""]),u("div",{class:`${_}-modal-close`,onClick:l=>{l.stopPropagation(),e.onClosed&&e.onClosed()}},[c("X")])]),u("div",{class:`${_}-modal-body`},[r])])])])]})}}}),W=a({props:{type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e){const l=y("usedLanguageText"),t=y("editorName"),n=w((()=>{var t,n,i,o;switch(e.type){case"link":return`${null==(t=l.linkModalTips)?void 0:t.title}${null==(n=l.toolbarTips)?void 0:n.link}`;case"image":return`${null==(i=l.linkModalTips)?void 0:i.title}${null==(o=l.toolbarTips)?void 0:o.image}`;default:return""}})),i=v({desc:"",url:""}),o=h();return m((()=>e.type),(l=>{"image"===l&&k((()=>{o.value.addEventListener("change",(()=>{D.emit("uploadImage",o.value.files,e.onOk)}))}))})),()=>u(V,{title:n.value,visible:e.visible,onClosed:e.onCancel,to:e.to},{default:()=>{var n,r,s,a,c,d;return["help"===e.type?u("div",null,null):u($,null,[u("div",{class:`${_}-form-item`},[u("label",{class:`${_}-lable`,for:`link-desc-${t}`},[null==(n=l.linkModalTips)?void 0:n.descLable]),u("input",{placeholder:null==(r=l.linkModalTips)?void 0:r.descLablePlaceHolder,class:`${_}-input`,id:`link-desc-${t}`,type:"text",value:i.desc,onChange:e=>{i.desc=e.target.value}},null)]),u("div",{class:`${_}-form-item`},[u("label",{class:`${_}-lable`,for:`link-url-${t}`},[null==(s=l.linkModalTips)?void 0:s.urlLable]),u("input",{placeholder:null==(a=l.linkModalTips)?void 0:a.UrlLablePlaceHolder,class:`${_}-input`,id:`link-url-${t}`,type:"text",value:i.url,onChange:e=>{i.url=e.target.value}},null)]),u("div",{class:`${_}-form-item`},[u("button",{class:`${_}-btn ${"link"===e.type&&_+"-btn-row"}`,onClick:()=>{e.onOk(i),i.desc="",i.url=""}},[null==(c=l.linkModalTips)?void 0:c.buttonOK]),"image"===e.type&&u($,null,[u("button",{class:`${_}-btn`,onClick:()=>{o.value.click()}},[null==(d=l.linkModalTips)?void 0:d.buttonUpload]),u("input",{ref:o,accept:"image/*",type:"file",multiple:"true",style:{display:"none"}},null)])])])]}})}}),Z=a({name:"MDEditorToolbar",props:{setting:{type:Object,default:()=>({})},updateSetting:{type:Function,default:()=>()=>{}}},setup(e){const l=y("usedLanguageText"),t=y("toolbars"),n=y("editorName"),i=v({title:!1,menu:!1}),o=(e,l)=>{D.emit("replace",e,l)},r=()=>{A.isEnabled?A.isFullscreen?A.exit():A.request():console.error("浏览器不支持全屏")};A.isEnabled&&A.on("change",(()=>{e.updateSetting(!e.setting.fullscreen,"fullscreen")}));const s=v({type:"link",visible:!1});D.on({name:"openModals",callback(e){s.type=e,s.visible=!0}});const a=h(document.body);return d((()=>{a.value=document.getElementById(`${_}-${n}`)})),()=>{var n,c,d,p,v,h,m,b,g,f,k,y,w,C,x,S,T,E,L,F,P,q,K,M,I,U,N,R,H;return u($,null,[u("div",{class:`${_}-toolbar`},[u("div",{class:`${_}-toolbar-left`},[t.includes("bold")&&u("div",{class:`${_}-toolbar-item`,title:null==(n=l.toolbarTips)?void 0:n.bold,onClick:()=>{o("bold")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-bold"},null)])]),t.includes("underline")&&u("div",{class:`${_}-toolbar-item`,title:null==(c=l.toolbarTips)?void 0:c.underline,onClick:()=>{o("underline")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-underline"},null)])]),t.includes("italic")&&u("div",{class:`${_}-toolbar-item`,title:null==(d=l.toolbarTips)?void 0:d.italic,onClick:()=>{o("italic")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-italic"},null)])]),t.includes("strikeThrough")&&u("div",{class:`${_}-toolbar-item`,title:null==(p=l.toolbarTips)?void 0:p.strikeThrough,onClick:()=>{o("strikeThrough")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-strike-through"},null)])]),u(j,null,null),t.includes("title")&&u(O,{visible:i.title,onChange:e=>{i.title=e},to:a.value,overlay:u("ul",{class:`${_}-menu`,onClick:()=>{i.title=!1}},[u("li",{class:`${_}-menu-item`,onClick:()=>{o("h1")}},[null==(v=l.titleItem)?void 0:v.h1]),u("li",{class:`${_}-menu-item`,onClick:()=>{o("h2")}},[null==(h=l.titleItem)?void 0:h.h2]),u("li",{class:`${_}-menu-item`,onClick:()=>{o("h3")}},[null==(m=l.titleItem)?void 0:m.h3]),u("li",{class:`${_}-menu-item`,onClick:()=>{o("h4")}},[null==(b=l.titleItem)?void 0:b.h4]),u("li",{class:`${_}-menu-item`,onClick:()=>{o("h5")}},[null==(g=l.titleItem)?void 0:g.h5]),u("li",{class:`${_}-menu-item`,onClick:()=>{o("h6")}},[null==(f=l.titleItem)?void 0:f.h6])])},{default:()=>{var e;return[u("div",{class:`${_}-toolbar-item`,title:null==(e=l.toolbarTips)?void 0:e.title},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-title"},null)])])]}}),t.includes("sub")&&u("div",{class:`${_}-toolbar-item`,title:null==(k=l.toolbarTips)?void 0:k.sub,onClick:()=>{o("sub")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-sub"},null)])]),t.includes("sup")&&u("div",{class:`${_}-toolbar-item`,title:null==(y=l.toolbarTips)?void 0:y.sup,onClick:()=>{o("sup")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-sup"},null)])]),t.includes("quote")&&u("div",{class:`${_}-toolbar-item`,title:null==(w=l.toolbarTips)?void 0:w.quote,onClick:()=>{o("quote")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-quote"},null)])]),t.includes("unorderedList")&&u("div",{class:`${_}-toolbar-item`,title:null==(C=l.toolbarTips)?void 0:C.unorderedList,onClick:()=>{o("unorderedList")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-unordered-list"},null)])]),t.includes("orderedList")&&u("div",{class:`${_}-toolbar-item`,title:null==(x=l.toolbarTips)?void 0:x.orderedList,onClick:()=>{o("orderedList")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-ordered-list"},null)])]),u(j,null,null),t.includes("codeRow")&&u("div",{class:`${_}-toolbar-item`,title:null==(S=l.toolbarTips)?void 0:S.codeRow,onClick:()=>{o("codeRow")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-code-row"},null)])]),t.includes("code")&&u("div",{class:`${_}-toolbar-item`,title:null==(T=l.toolbarTips)?void 0:T.code,onClick:()=>{o("code")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-code"},null)])]),t.includes("link")&&u("div",{class:`${_}-toolbar-item`,title:null==(E=l.toolbarTips)?void 0:E.link,onClick:()=>{s.type="link",s.visible=!0}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-link"},null)])]),t.includes("image")&&u("div",{class:`${_}-toolbar-item`,title:null==(L=l.toolbarTips)?void 0:L.image,onClick:()=>{s.type="image",s.visible=!0}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-image"},null)])]),t.includes("table")&&u("div",{class:`${_}-toolbar-item`,title:null==(F=l.toolbarTips)?void 0:F.table,onClick:()=>{o("table")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-table"},null)])]),u(j,null,null),t.includes("revoke")&&u("div",{class:`${_}-toolbar-item`,title:null==(P=l.toolbarTips)?void 0:P.revoke,onClick:()=>{D.emit("ctrlZ")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-revoke"},null)])]),t.includes("next")&&u("div",{class:`${_}-toolbar-item`,title:null==(q=l.toolbarTips)?void 0:q.next,onClick:()=>{D.emit("ctrlShiftZ")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-next"},null)])]),t.includes("save")&&u("div",{class:`${_}-toolbar-item`,title:null==(K=l.toolbarTips)?void 0:K.save,onClick:()=>{D.emit("onSave")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-baocun"},null)])])]),u("div",{class:`${_}-toolbar-right`},[t.includes("prettier")&&u("div",{class:`${_}-toolbar-item`,title:null==(M=l.toolbarTips)?void 0:M.prettier,onClick:()=>{o("prettier")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-prettier"},null)])]),t.includes("pageFullscreen")&&!e.setting.fullscreen&&u("div",{class:`${_}-toolbar-item`,title:null==(I=l.toolbarTips)?void 0:I.pageFullscreen,onClick:()=>{e.updateSetting(!e.setting.pageFullScreen,"pageFullScreen")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-"+(e.setting.pageFullScreen?"suoxiao":"fangda")},null)])]),t.includes("fullscreen")&&u("div",{class:`${_}-toolbar-item`,title:null==(U=l.toolbarTips)?void 0:U.fullscreen,onClick:r},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-"+(e.setting.fullscreen?"fullScreen-exit":"fullScreen")},null)])]),t.includes("preview")&&u("div",{class:`${_}-toolbar-item`,title:null==(N=l.toolbarTips)?void 0:N.preview,onClick:()=>{e.updateSetting(!e.setting.preview,"preview")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-preview"},null)])]),t.includes("htmlPreview")&&u("div",{class:`${_}-toolbar-item`,title:null==(R=l.toolbarTips)?void 0:R.htmlPreview,onClick:()=>{e.updateSetting(!e.setting.htmlPreview,"htmlPreview")}},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-coding"},null)])]),t.includes("github")&&u("div",{class:`${_}-toolbar-item`,title:null==(H=l.toolbarTips)?void 0:H.github,onClick:()=>((e,l={newWindow:!0,nofollow:!0})=>{e||console.warn("无效的链接！");const t=document.createElement("a");t.href=e,t.style.display="none",l.newWindow&&(t.target="_blank"),l.nofollow&&(t.rel="noopener noreferrer"),document.body.appendChild(t),t.click(),document.body.removeChild(t)})("https://github.com/imzbf/md-editor-v3")},[u("svg",{class:`${_}-icon`,"aria-hidden":"true"},[u("use",{"xlink:href":"#icon-github"},null)])])])]),u(W,{visible:s.visible,type:s.type,onCancel:()=>{s.visible=!1},onOk:e=>{e&&o(s.type,{desc:e.desc,url:e.url}),s.visible=!1},to:a.value},null)])}}});const X=()=>{document.querySelectorAll(`.${_}-preview-wrapper pre`).forEach((e=>{const l=document.createElement("span");l.setAttribute("class","copy-button"),l.innerText="复制代码",l.addEventListener("click",(()=>{x(e.querySelector("code").innerText)})),e.appendChild(l)}))};var Y=a({name:"MDEditorContent",props:{value:{type:String,default:""},hljs:{type:Object,default:null},onChange:{type:Function,default:()=>()=>{}},setting:{type:Object,default:()=>({})}},setup(e){const l=h(null!==e.hljs),t=y("highlight"),n=h();let i="";const o=h(),r=h();e.hljs&&C.setOptions({highlight:l=>e.hljs.highlightAuto(l).value}),d((()=>{var l,t;X(),null==(l=n.value)||l.addEventListener("select",(()=>{var e;i=(null==(e=window.getSelection())?void 0:e.toString())||""})),null==(t=n.value)||t.addEventListener("keypress",(l=>{var t,i,o;if("Enter"===l.key){const r=null==(t=n.value)?void 0:t.selectionStart,s=null==(i=n.value)?void 0:i.value.substring(0,r),a=null==(o=n.value)?void 0:o.value.substring(r),u=null==s?void 0:s.lastIndexOf("\n"),c=null==s?void 0:s.substring(u+1,r);if(/^\d+\.\s|^-\s/.test(c))if(l.cancelBubble=!0,l.preventDefault(),l.stopPropagation(),/^\d+\.\s+$|^-\s+$/.test(c)){const l=null==s?void 0:s.replace(new RegExp(c+"$"),"");e.onChange(l+a),q(n.value,null==l?void 0:l.length)}else if(/^-\s+.+/.test(c))e.onChange(K(n.value,"\n- ",{}));else{const l=null==c?void 0:c.match(/\d+(?=\.)/),t=l&&Number(l[0])+1||1;e.onChange(K(n.value,`\n${t}. `,{}))}}})),D.on({name:"replace",callback(l,t){e.onChange(((e,l="",t,n)=>{let i="",o=0,r=0,s=!1;if(/^h[1-6]{1}$/.test(e)){const t=e.replace(/^h(\d)/,((e,l)=>new Array(Number(l)).fill("#",0,l).join("")));i=`${t} ${l}`,o=t.length+1}else{if("prettier"===e)return window.prettier.format(t.value,{parser:"markdown",plugins:window.prettierPlugins});switch(e){case"bold":i=`**${l}**`,o=2,r=-2;break;case"underline":i=`<u>${l}</u>`,o=3,r=-4;break;case"italic":i=`*${l}*`,o=1,r=-1;break;case"strikeThrough":i=`~${l}~`,o=1,r=-1;break;case"sub":i=`<sub>${l}</sub>`,o=5,r=-6;break;case"sup":i=`<sup>${l}</sup>`,o=5,r=-6;break;case"codeRow":i="`"+l+"`",o=1,r=-1;break;case"quote":i=`> ${l}`,o=2;break;case"orderedList":i=`1. ${l}`,o=3;break;case"unorderedList":i=`- ${l}`,o=2;break;case"code":i="```language\n"+l+"\n```\n",o=3,r=11-i.length,s=!0;break;case"table":i="| 表头 | 表头 |\n| - | - |\n| 内容 | 内容 |\n",o=2,r=4-i.length,s=!0;break;case"link":{const{desc:e,url:l}=n;i=`[${e}](${l})`;break}case"image":{const{desc:e,url:l}=n;i=`![${e}](${l})\n`}}}return K(t,i,{deviationStart:o,deviationEnd:r,select:s})})(l,i,n.value,t))}}),M(n.value,o.value||r.value)}));const s=w((()=>l.value?C(e.value):"")),a=()=>{C.setOptions({highlight:e=>window.hljs.highlightAuto(e).value}),l.value=!0,k(X)};let c=()=>{};return m((()=>e.value),(()=>{k((()=>{X(),e.setting.preview&&(c=M(n.value,o.value||r.value))}))})),m((()=>e.setting.preview),(e=>{e?k((()=>{c=M(n.value,o.value||r.value)})):c()})),(e=>{const l=y("historyLength");let t=-1;const n={list:[e.value],userUpdated:!0,curr:0};m((()=>e.value),(e=>{clearTimeout(t),t=setTimeout((()=>{n.userUpdated?(n.curr<n.list.length-1&&(n.list=n.list.slice(0,n.curr+1)),n.list.length>l&&n.list.shift(),n.list.push(e),n.curr=n.list.length-1):n.userUpdated=!0}),500)})),D.on({name:"ctrlZ",callback(){n.userUpdated=!1,n.curr=n.curr-1<0?0:n.curr-1,e.onChange(n.list[n.curr])}}),D.on({name:"ctrlShiftZ",callback(){n.userUpdated=!1,n.curr=n.curr+1===n.list.length?n.curr:n.curr+1,e.onChange(n.list[n.curr])}})})(e),()=>u($,null,[u("div",{class:`${_}-content`},[u("div",{class:[`${_}-input-wrapper`]},[u("textarea",{ref:n,value:e.value,onInput:l=>{i="",e.onChange(l.target.value)},class:[e.setting.preview||e.setting.htmlPreview?"":"textarea-only"]},null)]),e.setting.preview&&u("div",{ref:o,class:`${_}-preview-wrapper`,innerHTML:s.value},null),e.setting.htmlPreview&&u("div",{ref:r,class:`${_}-html-wrapper`},[s.value])]),null===e.hljs&&u(f,{to:document.head},{default:()=>[u("link",{rel:"stylesheet",href:t.css},null),u("script",{src:t.js,onLoad:a},null)]})])}});const _="md";var J=a({name:"MDEditor",props:{modelValue:{type:String,default:""},theme:{type:String,default:"light"},editorClass:{type:String,default:""},hljs:{type:Object,default:null},highlightJs:{type:String,default:"https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/highlight.min.js"},highlightCss:{type:String,default:"https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/styles/atom-one-dark.min.css"},historyLength:{type:Number,default:10},onChange:{type:Function},onSave:{type:Function,default:()=>()=>{}},onUploadImg:{type:Function},pageFullScreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},language:{type:String,default:"zh-CN"},languageUserDefined:{type:Array,default:()=>[]},toolbars:{type:Array,default:["bold","underline","italic","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","codeRow","code","link","image","table","revoke","next","save","prettier","pageFullscreen","fullscreen","preview","htmlPreview","github"]},prettier:{type:Boolean,default:!0},prettierCDN:{type:String,default:"https://unpkg.com/prettier@2.3.2/standalone.js"},prettierMDCDN:{type:String,default:"https://unpkg.com/prettier@2.3.2/parser-markdown.js"},editorName:{type:String,default:"editor"}},setup(e,l){((e,l)=>{D.on({name:"onSave",callback(){e.onSave?e.onSave(e.modelValue):l.emit("onSave",e.modelValue)}});const t=l=>{var t,n,i,o,r,s,a,u,c,d,p,v,h,m,b,g,f,k,y,w,$,C;if(l.ctrlKey||l.metaKey)switch(l.code){case"KeyS":l.shiftKey?(null==(t=e.toolbars)?void 0:t.includes("strikeThrough"))&&D.emit("replace","strikeThrough"):(null==(n=e.toolbars)?void 0:n.includes("save"))&&(D.emit("onSave",e.modelValue),l.preventDefault());break;case"KeyB":(null==(i=e.toolbars)?void 0:i.includes("bold"))&&(D.emit("replace","bold"),l.preventDefault());break;case"KeyU":l.shiftKey?(null==(o=e.toolbars)?void 0:o.includes("unorderedList"))&&(D.emit("replace","unorderedList"),l.preventDefault()):(null==(r=e.toolbars)?void 0:r.includes("underline"))&&(D.emit("replace","underline"),l.preventDefault());break;case"KeyI":l.shiftKey?(null==(s=e.toolbars)?void 0:s.includes("image"))&&(D.emit("openModals","img"),l.preventDefault()):(null==(a=e.toolbars)?void 0:a.includes("italic"))&&(D.emit("replace","italic"),l.preventDefault());break;case"Digit1":(null==(u=e.toolbars)?void 0:u.includes("title"))&&(D.emit("replace","h1"),l.preventDefault());break;case"Digit2":(null==(c=e.toolbars)?void 0:c.includes("title"))&&(D.emit("replace","h2"),l.preventDefault());break;case"Digit3":(null==(d=e.toolbars)?void 0:d.includes("title"))&&(D.emit("replace","h3"),l.preventDefault());break;case"Digit4":(null==(p=e.toolbars)?void 0:p.includes("title"))&&(D.emit("replace","h4"),l.preventDefault());break;case"Digit5":(null==(v=e.toolbars)?void 0:v.includes("title"))&&(D.emit("replace","h5"),l.preventDefault());break;case"Digit6":(null==(h=e.toolbars)?void 0:h.includes("title"))&&(D.emit("replace","h6"),l.preventDefault());break;case"ArrowUp":(null==(m=e.toolbars)?void 0:m.includes("sup"))&&(D.emit("replace","sup"),l.preventDefault());break;case"ArrowDown":(null==(b=e.toolbars)?void 0:b.includes("sub"))&&(D.emit("replace","sub"),l.preventDefault());break;case"KeyQ":D.emit("replace","quote"),l.preventDefault();break;case"KeyO":(null==(g=e.toolbars)?void 0:g.includes("orderedList"))&&(D.emit("replace","orderedList"),l.preventDefault());break;case"KeyC":l.shiftKey?(null==(f=e.toolbars)?void 0:f.includes("code"))&&(D.emit("replace","code"),l.preventDefault()):l.altKey&&(null==(k=e.toolbars)?void 0:k.includes("codeRow"))&&(D.emit("replace","codeRow"),l.preventDefault());break;case"KeyL":(null==(y=e.toolbars)?void 0:y.includes("link"))&&(D.emit("openModals","link"),l.preventDefault());break;case"KeyZ":l.shiftKey?(null==(w=e.toolbars)?void 0:w.includes("next"))&&(D.emit("ctrlShiftZ"),l.preventDefault()):(null==($=e.toolbars)?void 0:$.includes("revoke"))&&(D.emit("ctrlZ"),l.preventDefault());break;case"KeyF":l.shiftKey&&(null==(C=e.toolbars)?void 0:C.includes("prettier"))&&(D.emit("replace","prettier"),l.preventDefault())}},n=e=>{if(e.clipboardData&&e.clipboardData.files.length>0){const l=e.clipboardData.files[0];/image\/.*/.test(l.type)&&(D.emit("uploadImage",[l]),e.preventDefault())}};d((()=>{window.addEventListener("keydown",t),document.addEventListener("paste",n)})),p((()=>{window.removeEventListener("keydown",t),document.removeEventListener("paste",n)}))})(e,l),S("highlight",{js:e.highlightJs,css:e.highlightCss}),S("historyLength",e.historyLength);const t=w((()=>{const l=s(s({},F),e.languageUserDefined);return l[e.language]?l[e.language]:F["zh-CN"]}));S("usedLanguageText",t.value),S("toolbars",e.toolbars),S("editorName",e.editorName),D.on({name:"uploadImage",callback(t,n){const i=e=>{e.forEach((e=>{setTimeout((()=>{D.emit("replace","image",{desc:"",url:e})}),0)})),n&&n()};e.onUploadImg?e.onUploadImg(t,i):l.emit("onUploadImg",t,i)}});const n=v({pageFullScreen:e.pageFullScreen,fullscreen:!1,preview:e.preview,htmlPreview:!e.preview&&e.htmlPreview}),i=(e,l)=>{n[l]=e,"preview"===l&&n.preview?n.htmlPreview=!1:"htmlPreview"===l&&n.htmlPreview&&(n.preview=!1)};return()=>u("div",{id:`${_}-${e.editorName}`,class:[_,e.editorClass,"dark"===e.theme&&`${_}-dark`,n.fullscreen||n.pageFullScreen?`${_}-fullscreen`:""]},[u(Z,{setting:n,updateSetting:i},null),u(Y,{hljs:e.hljs,value:e.modelValue,onChange:t=>{e.onChange?e.onChange(t):l.emit("update:modelValue",t)},setting:n},null),u(f,{to:document.head},{default:()=>[u("script",{src:L},null)]}),e.prettier&&u(f,{to:document.head},{default:()=>[u("script",{src:e.prettierCDN},null),u("script",{src:e.prettierMDCDN},null)]})])}});J.install=e=>(e.component(J.name),e);var Q=a({props:{theme:String,onChange:{type:Function,default:()=>{}}},setup(e){const l=v({text:"## 二级标题 \n### 三级标题 \n\n## 代码演示 \n\n依照普朗克长度这项单位，目前可观测的宇宙的直径估计值（直径约930亿光年，即8.8 × 1026 米）即为5.4 × 1061倍普朗克长度。[1]，而可观测宇宙体积则为8.4 × 10184立方普朗克长度（普朗克体积）。\n\n```js\nconst data = Object.create({a: 1, b: 2});\n\nconsole.log(data.a);\n```\n\n\n"});return()=>u("div",{class:"container"},[u(J,{theme:e.theme,modelValue:l.text,onChange:e=>l.text=e,onUploadImg:(e,l)=>{console.log(e),l(["https://art-1252753142.cos.ap-chengdu.myqcloud.com/2021/06301522413082599421018280471.png","https://art-1252753142.cos.ap-chengdu.myqcloud.com/2021/06301606102817061001806835437.gif"])}},null),u("div",{class:"preview-actions"},[u("button",{onClick:()=>e.onChange("light")},[c("默认模式")]),u("button",{onClick:()=>e.onChange("dark")},[c("暗黑模式")])])])}});T(a({setup(){const e=h("light");return()=>u("div",{class:["doc","dark"===e.value&&"theme-dark"]},[u(E,null,null),u(Q,{theme:e.value,onChange:l=>e.value=l},null)])}})).mount("#app");
