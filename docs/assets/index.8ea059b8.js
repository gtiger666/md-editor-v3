var e=Object.defineProperty,s=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(s,n,t)=>n in s?e(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t,r=(e,s)=>{for(var n in s||(s={}))l.call(s,n)&&i(e,n,s[n]);if(t)for(var n of t(s))a.call(s,n)&&i(e,n,s[n]);return e};import{d as o,c as d,a as c,o as p,b as u,r as h,e as g,w as v,f as m,i as b,T as f,n as j,g as k,h as y,F as w,m as C,j as $,p as x,k as T}from"./vendor.c7c14d0f.js";var S=o({props:{theme:String,onChange:{type:Function,default:()=>{}}},setup:e=>()=>d("header",{class:"page-header"},[d("section",{class:"container"},[d("h1",{class:"project-name"},[c("md-editor-v3")]),d("p",{class:"project-desc"},[c("Markdown编辑器，基于vue3，使用jsx和typescript语法开发，支持切换主题、prettier美化文本等。")]),d("p",{class:"header-actions"},[d("button",{class:"btn btn-header"},[d("a",{href:"https://github.com/imzbf/md-editor-v3",target:"_blank",title:"md-editor-v3"},[c("GitHub源码")])]),d("button",{class:"btn btn-header",onClick:()=>e.onChange("light")},[c("默认模式")]),d("button",{class:"btn btn-header",onClick:()=>e.onChange("dark")},[c("暗黑模式")])])])])}),L="//at.alicdn.com/t/font_2605852_w2rq8ip7vg.js";const E={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",htmlPreview:"html代码预览",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},linkModalTips:{title:"添加",descLable:"链接描述：",descLablePlaceHolder:"请输入描述...",urlLable:"链接地址：",UrlLablePlaceHolder:"请输入链接...",buttonOK:"确定",buttonUpload:"上传"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",htmlPreview:"html preview",github:"source code"},titleItem:{h1:"lv1 heading",h2:"lv2 heading",h3:"lv3 heading",h4:"lv4 heading",h5:"lv5 heading",h6:"lv6 heading"},linkModalTips:{title:"add ",descLable:"desc:",descLablePlaceHolder:"enter a description...",urlLable:"link:",UrlLablePlaceHolder:"enter a link...",buttonOK:"ok",buttonUpload:"upload"}}};var F=new class{constructor(){this.pools={}}remove(e,s){const n=this.pools[e];n&&(this.pools[e]=n.filter((e=>e===s)))}on(e){return void 0===this.pools[e.name]&&(this.pools[e.name]=[]),this.pools[e.name].push(e.callback),this.pools[e.name].includes(e.callback)}emit(e,...s){const n=this.pools[e];n&&n.forEach((n=>{try{n(...s)}catch(t){console.error(`${e}监听事件执行异常！`,t)}}))}};var D=o({setup:()=>()=>d("div",{class:`${J}-divider`},null)});const M=({instance:e,ctx:s,props:n={}},t="default")=>{const l=(null==e?void 0:e.$slots[t])||(null==s?void 0:s.slots[t]);return(l?l(e):"")||n[t]};var P=o({props:{trigger:{type:String,default:"click"},overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e,t){const l=`${J}-dropdown-hidden`,a=h({overlayClass:[`${J}-dropdown-overlay`,l],overlayStyle:{}}),i=g(document.body),o=g(document.body),c=(t,l="click")=>{if("click"===l){const t=i.value,l=o.value,p=t.getBoundingClientRect(),u=t.offsetTop,h=t.offsetLeft,g=p.height,v=p.width;a.overlayStyle=(d=r({},a.overlayStyle),c={top:u+g+"px",left:h-l.offsetWidth/2+v/2+"px",marginTop:"10px"},s(d,n(c))),e.onChange(!e.visible)}else e.onChange(!0);var d,c};v((()=>e.visible),(e=>{e?a.overlayClass=a.overlayClass.filter((e=>e!==l)):a.overlayClass.push(l)}));const j=s=>{const n=i.value,t=o.value;n.contains(s.target)||t.contains(s.target)||e.onChange(!1)};return p((()=>{document.addEventListener("click",j)})),u((()=>{document.removeEventListener("click",j)})),()=>{const s=M({ctx:t}),n=M({props:e,ctx:t},"overlay"),l=m(s instanceof Array?s[0]:s,{onClick:c,ref:i}),r=m(n instanceof Array?n[0]:n,{class:a.overlayClass,style:a.overlayStyle,ref:o});return[l,d(f,{to:e.to},"function"==typeof(p=r)||"[object Object]"===Object.prototype.toString.call(p)&&!b(p)?r:{default:()=>[r]})];var p}}});const R=(e,s=0,n=s)=>{e.setSelectionRange?setTimeout((()=>{e.setSelectionRange(s,n),e.focus()}),0):console.log("无法重置光标位置！")},_=(e,s,n)=>{const{deviationStart:t=0,deviationEnd:l=0,direct:a=!1,select:i=!1}=n;let r="";if(e.selectionStart||0===e.selectionStart){const n=e.selectionStart,a=e.selectionEnd||0;r=e.value.substring(0,n)+s+e.value.substring(a,e.value.length),R(e,i?n+t:n+s.length+l,n+s.length+l)}else r+=s;return a&&(e.value=r),r},H=(e,s)=>{const n=e.clientHeight,t=s.clientHeight,l=(e.scrollHeight-n)/(s.scrollHeight-t),a=()=>{s.scrollTo({top:e.scrollTop/l})};return e.removeEventListener("scroll",a),e.addEventListener("scroll",a),()=>{e.removeEventListener("scroll",a)}};var I,O,q,U,N,z,K={exports:{}};
/*!
* screenfull
* v5.1.0 - 2020-12-24
* (c) Sindre Sorhus; MIT License
*/I=K,O="undefined"!=typeof window&&void 0!==window.document?window.document:{},q=I.exports,U=function(){for(var e,s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,t=s.length,l={};n<t;n++)if((e=s[n])&&e[1]in O){for(n=0;n<e.length;n++)l[s[0][n]]=e[n];return l}return!1}(),N={change:U.fullscreenchange,error:U.fullscreenerror},z={request:function(e,s){return new Promise(function(n,t){var l=function(){this.off("change",l),n()}.bind(this);this.on("change",l);var a=(e=e||O.documentElement)[U.requestFullscreen](s);a instanceof Promise&&a.then(l).catch(t)}.bind(this))},exit:function(){return new Promise(function(e,s){if(this.isFullscreen){var n=function(){this.off("change",n),e()}.bind(this);this.on("change",n);var t=O[U.exitFullscreen]();t instanceof Promise&&t.then(n).catch(s)}else e()}.bind(this))},toggle:function(e,s){return this.isFullscreen?this.exit():this.request(e,s)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,s){var n=N[e];n&&O.addEventListener(n,s,!1)},off:function(e,s){var n=N[e];n&&O.removeEventListener(n,s,!1)},raw:U},U?(Object.defineProperties(z,{isFullscreen:{get:function(){return Boolean(O[U.fullscreenElement])}},element:{enumerable:!0,get:function(){return O[U.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(O[U.fullscreenEnabled])}}}),q?I.exports=z:window.screenfull=z):q?I.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};var B=K.exports;var A=o({props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:[Number,String],default:"auto"},onClosed:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e,s){const n=g(e.visible),t=g([`${J}-modal`]),l=g(),a=g();let i=()=>{};const r=h({left:"0px",top:"0px"});return p((()=>{i=((e,s)=>{const n=n=>{const t=e.parentElement||document.body,l=t.offsetWidth,a=t.offsetHeight,i=document.documentElement.clientWidth,r=document.documentElement.clientHeight,o=n.offsetX,d=n.offsetY,c=e=>{let n=(e.pageX||e.clientX+document.body.scrollLeft-document.body.clientLeft)-o,c=(e.pageY||e.clientY+document.body.scrollTop-document.body.clientTop)-d;n=n<1?1:n<i-l-1?n:i-l-1,c=c<1?1:c<r-a-1?c:r-a-1,s?s(n,c):(t.style.left=n+"px",t.style.top=c+"px")};document.addEventListener("mousemove",c);const p=()=>{document.removeEventListener("mousemove",c),e.removeEventListener("mouseup",p)};e.addEventListener("mouseup",p)};return e.addEventListener("mousedown",n),()=>{e.removeEventListener("mousedown",n)}})(a.value,((e,s)=>{r.left=e+"px",r.top=s+"px"}))})),u((()=>{i()})),v((()=>e.visible),(e=>{e?(t.value.push("zoom-in"),n.value=e,j((()=>{const e=l.value.offsetWidth/2,s=l.value.offsetHeight/2,n=document.documentElement.clientWidth/2,t=document.documentElement.clientHeight/2;r.left=n-e+"px",r.top=t-s+"px"})),setTimeout((()=>{t.value=t.value.filter((e=>"zoom-in"!==e))}),140)):(t.value.push("zoom-out"),setTimeout((()=>{t.value=t.value.filter((e=>"zoom-out"!==e)),n.value=e}),130))})),()=>{const i=M({ctx:s}),o=M({props:e,ctx:s},"title");return d(f,{to:e.to},{default:()=>[d("div",{style:{display:n.value?"block":"none"}},[d("div",{class:`${J}-modal-mask`},null),d("div",{class:`${J}-modal-wrapper`},[d("div",{class:t.value,style:{left:r.left,top:r.top,width:"number"==typeof e.width?`${e.width}px`:e.width},ref:l},[d("div",{class:`${J}-modal-header`,ref:a},[d("div",{class:`${J}-modal-title`},[o||""]),d("div",{class:`${J}-modal-close`,onClick:s=>{s.stopPropagation(),e.onClosed&&e.onClosed()}},[c("X")])]),d("div",{class:`${J}-modal-body`},[i])])])])]})}}}),V=o({props:{type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>()=>{}},onOk:{type:Function,default:()=>()=>{}},to:{type:Element,default:()=>document.body}},setup(e){const s=k("usedLanguageText"),n=k("editorName"),t=y((()=>{var n,t,l,a;switch(e.type){case"link":return`${null==(n=s.linkModalTips)?void 0:n.title}${null==(t=s.toolbarTips)?void 0:t.link}`;case"image":return`${null==(l=s.linkModalTips)?void 0:l.title}${null==(a=s.toolbarTips)?void 0:a.image}`;default:return""}})),l=h({desc:"",url:""}),a=g();return v((()=>e.type),(s=>{"image"===s&&j((()=>{a.value.addEventListener("change",(()=>{F.emit("uploadImage",a.value.files,e.onOk)}))}))})),()=>d(A,{title:t.value,visible:e.visible,onClosed:e.onCancel,to:e.to},{default:()=>{var t,i,r,o,c,p;return["help"===e.type?d("div",null,null):d(w,null,[d("div",{class:`${J}-form-item`},[d("label",{class:`${J}-lable`,for:`link-desc-${n}`},[null==(t=s.linkModalTips)?void 0:t.descLable]),d("input",{placeholder:null==(i=s.linkModalTips)?void 0:i.descLablePlaceHolder,class:`${J}-input`,id:`link-desc-${n}`,type:"text",value:l.desc,onChange:e=>{l.desc=e.target.value}},null)]),d("div",{class:`${J}-form-item`},[d("label",{class:`${J}-lable`,for:`link-url-${n}`},[null==(r=s.linkModalTips)?void 0:r.urlLable]),d("input",{placeholder:null==(o=s.linkModalTips)?void 0:o.UrlLablePlaceHolder,class:`${J}-input`,id:`link-url-${n}`,type:"text",value:l.url,onChange:e=>{l.url=e.target.value}},null)]),d("div",{class:`${J}-form-item`},[d("button",{class:`${J}-btn ${"link"===e.type&&J+"-btn-row"}`,onClick:()=>{e.onOk(l),l.desc="",l.url=""}},[null==(c=s.linkModalTips)?void 0:c.buttonOK]),"image"===e.type&&d(w,null,[d("button",{class:`${J}-btn`,onClick:()=>{a.value.click()}},[null==(p=s.linkModalTips)?void 0:p.buttonUpload]),d("input",{ref:a,accept:"image/*",type:"file",multiple:"true",style:{display:"none"}},null)])])])]}})}}),Z=o({name:"MDEditorToolbar",props:{setting:{type:Object,default:()=>({})},updateSetting:{type:Function,default:()=>()=>{}}},setup(e){const s=k("usedLanguageText"),n=k("toolbars"),t=k("editorName"),l=h({title:!1,menu:!1}),a=(e,s)=>{F.emit("replace",e,s)},i=()=>{B.isEnabled?B.isFullscreen?B.exit():B.request():console.error("浏览器不支持全屏")};B.isEnabled&&B.on("change",(()=>{e.updateSetting(!e.setting.fullscreen,"fullscreen")}));const r=h({type:"link",visible:!1});F.on({name:"openModals",callback(e){r.type=e,r.visible=!0}});const o=g(document.body);return p((()=>{o.value=document.getElementById(`${J}-${t}`)})),()=>{var t,c,p,u,h,g,v,m,b,f,j,k,y,C,$,x,T,S,L,E,M,R,_,H,I,O,q,U,N;return d(w,null,[d("div",{class:`${J}-toolbar`},[d("div",{class:`${J}-toolbar-left`},[n.includes("bold")&&d("div",{class:`${J}-toolbar-item`,title:null==(t=s.toolbarTips)?void 0:t.bold,onClick:()=>{a("bold")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-bold"},null)])]),n.includes("underline")&&d("div",{class:`${J}-toolbar-item`,title:null==(c=s.toolbarTips)?void 0:c.underline,onClick:()=>{a("underline")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-underline"},null)])]),n.includes("italic")&&d("div",{class:`${J}-toolbar-item`,title:null==(p=s.toolbarTips)?void 0:p.italic,onClick:()=>{a("italic")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-italic"},null)])]),n.includes("strikeThrough")&&d("div",{class:`${J}-toolbar-item`,title:null==(u=s.toolbarTips)?void 0:u.strikeThrough,onClick:()=>{a("strikeThrough")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-strike-through"},null)])]),d(D,null,null),n.includes("title")&&d(P,{visible:l.title,onChange:e=>{l.title=e},to:o.value,overlay:d("ul",{class:`${J}-menu`,onClick:()=>{l.title=!1}},[d("li",{class:`${J}-menu-item`,onClick:()=>{a("h1")}},[null==(h=s.titleItem)?void 0:h.h1]),d("li",{class:`${J}-menu-item`,onClick:()=>{a("h2")}},[null==(g=s.titleItem)?void 0:g.h2]),d("li",{class:`${J}-menu-item`,onClick:()=>{a("h3")}},[null==(v=s.titleItem)?void 0:v.h3]),d("li",{class:`${J}-menu-item`,onClick:()=>{a("h4")}},[null==(m=s.titleItem)?void 0:m.h4]),d("li",{class:`${J}-menu-item`,onClick:()=>{a("h5")}},[null==(b=s.titleItem)?void 0:b.h5]),d("li",{class:`${J}-menu-item`,onClick:()=>{a("h6")}},[null==(f=s.titleItem)?void 0:f.h6])])},{default:()=>{var e;return[d("div",{class:`${J}-toolbar-item`,title:null==(e=s.toolbarTips)?void 0:e.title},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-title"},null)])])]}}),n.includes("sub")&&d("div",{class:`${J}-toolbar-item`,title:null==(j=s.toolbarTips)?void 0:j.sub,onClick:()=>{a("sub")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-sub"},null)])]),n.includes("sup")&&d("div",{class:`${J}-toolbar-item`,title:null==(k=s.toolbarTips)?void 0:k.sup,onClick:()=>{a("sup")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-sup"},null)])]),n.includes("quote")&&d("div",{class:`${J}-toolbar-item`,title:null==(y=s.toolbarTips)?void 0:y.quote,onClick:()=>{a("quote")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-quote"},null)])]),n.includes("unorderedList")&&d("div",{class:`${J}-toolbar-item`,title:null==(C=s.toolbarTips)?void 0:C.unorderedList,onClick:()=>{a("unorderedList")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-unordered-list"},null)])]),n.includes("orderedList")&&d("div",{class:`${J}-toolbar-item`,title:null==($=s.toolbarTips)?void 0:$.orderedList,onClick:()=>{a("orderedList")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-ordered-list"},null)])]),d(D,null,null),n.includes("codeRow")&&d("div",{class:`${J}-toolbar-item`,title:null==(x=s.toolbarTips)?void 0:x.codeRow,onClick:()=>{a("codeRow")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-code-row"},null)])]),n.includes("code")&&d("div",{class:`${J}-toolbar-item`,title:null==(T=s.toolbarTips)?void 0:T.code,onClick:()=>{a("code")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-code"},null)])]),n.includes("link")&&d("div",{class:`${J}-toolbar-item`,title:null==(S=s.toolbarTips)?void 0:S.link,onClick:()=>{r.type="link",r.visible=!0}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-link"},null)])]),n.includes("image")&&d("div",{class:`${J}-toolbar-item`,title:null==(L=s.toolbarTips)?void 0:L.image,onClick:()=>{r.type="image",r.visible=!0}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-image"},null)])]),n.includes("table")&&d("div",{class:`${J}-toolbar-item`,title:null==(E=s.toolbarTips)?void 0:E.table,onClick:()=>{a("table")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-table"},null)])]),d(D,null,null),n.includes("revoke")&&d("div",{class:`${J}-toolbar-item`,title:null==(M=s.toolbarTips)?void 0:M.revoke,onClick:()=>{F.emit("ctrlZ")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-revoke"},null)])]),n.includes("next")&&d("div",{class:`${J}-toolbar-item`,title:null==(R=s.toolbarTips)?void 0:R.next,onClick:()=>{F.emit("ctrlShiftZ")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-next"},null)])]),n.includes("save")&&d("div",{class:`${J}-toolbar-item`,title:null==(_=s.toolbarTips)?void 0:_.save,onClick:()=>{F.emit("onSave")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-baocun"},null)])])]),d("div",{class:`${J}-toolbar-right`},[n.includes("prettier")&&d("div",{class:`${J}-toolbar-item`,title:null==(H=s.toolbarTips)?void 0:H.prettier,onClick:()=>{a("prettier")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-prettier"},null)])]),n.includes("pageFullscreen")&&!e.setting.fullscreen&&d("div",{class:`${J}-toolbar-item`,title:null==(I=s.toolbarTips)?void 0:I.pageFullscreen,onClick:()=>{e.updateSetting(!e.setting.pageFullScreen,"pageFullScreen")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-"+(e.setting.pageFullScreen?"suoxiao":"fangda")},null)])]),n.includes("fullscreen")&&d("div",{class:`${J}-toolbar-item`,title:null==(O=s.toolbarTips)?void 0:O.fullscreen,onClick:i},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-"+(e.setting.fullscreen?"fullScreen-exit":"fullScreen")},null)])]),n.includes("preview")&&d("div",{class:`${J}-toolbar-item`,title:null==(q=s.toolbarTips)?void 0:q.preview,onClick:()=>{e.updateSetting(!e.setting.preview,"preview")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-preview"},null)])]),n.includes("htmlPreview")&&d("div",{class:`${J}-toolbar-item`,title:null==(U=s.toolbarTips)?void 0:U.htmlPreview,onClick:()=>{e.updateSetting(!e.setting.htmlPreview,"htmlPreview")}},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-coding"},null)])]),n.includes("github")&&d("div",{class:`${J}-toolbar-item`,title:null==(N=s.toolbarTips)?void 0:N.github,onClick:()=>((e,s={newWindow:!0,nofollow:!0})=>{e||console.warn("无效的链接！");const n=document.createElement("a");n.href=e,n.style.display="none",s.newWindow&&(n.target="_blank"),s.nofollow&&(n.rel="noopener noreferrer"),document.body.appendChild(n),n.click(),document.body.removeChild(n)})("https://github.com/imzbf/md-editor-v3")},[d("svg",{class:`${J}-icon`,"aria-hidden":"true"},[d("use",{"xlink:href":"#icon-github"},null)])])])]),d(V,{visible:r.visible,type:r.type,onCancel:()=>{r.visible=!1},onOk:e=>{e&&a(r.type,{desc:e.desc,url:e.url}),r.visible=!1},to:o.value},null)])}}});var W=o({name:"MDEditorContent",props:{value:{type:String,default:""},hljs:{type:Object,default:null},onChange:{type:Function,default:()=>()=>{}},setting:{type:Object,default:()=>({})},onHtmlChanged:{type:Function,default:()=>()=>{}}},setup(e){const s=g(null!==e.hljs),n=k("highlight"),t=g();let l="";const a=g(),i=g();e.hljs&&C.setOptions({highlight:s=>e.hljs.highlightAuto(s).value}),p((()=>{var s,n;null==(s=t.value)||s.addEventListener("select",(()=>{var e;l=(null==(e=window.getSelection())?void 0:e.toString())||""})),null==(n=t.value)||n.addEventListener("keypress",(s=>{var n,l,a;if("Enter"===s.key){const i=null==(n=t.value)?void 0:n.selectionStart,r=null==(l=t.value)?void 0:l.value.substring(0,i),o=null==(a=t.value)?void 0:a.value.substring(i),d=null==r?void 0:r.lastIndexOf("\n"),c=null==r?void 0:r.substring(d+1,i);if(/^\d+\.\s|^-\s/.test(c))if(s.cancelBubble=!0,s.preventDefault(),s.stopPropagation(),/^\d+\.\s+$|^-\s+$/.test(c)){const s=null==r?void 0:r.replace(new RegExp(c+"$"),"");e.onChange(s+o),R(t.value,null==s?void 0:s.length)}else if(/^-\s+.+/.test(c))e.onChange(_(t.value,"\n- ",{}));else{const s=null==c?void 0:c.match(/\d+(?=\.)/),n=s&&Number(s[0])+1||1;e.onChange(_(t.value,`\n${n}. `,{}))}}})),F.on({name:"replace",callback(s,n){e.onChange(((e,s="",n,t)=>{let l="",a=0,i=0,r=!1;if(/^h[1-6]{1}$/.test(e)){const n=e.replace(/^h(\d)/,((e,s)=>new Array(Number(s)).fill("#",0,s).join("")));l=`${n} ${s}`,a=n.length+1}else{if("prettier"===e)return window.prettier.format(n.value,{parser:"markdown",plugins:window.prettierPlugins});switch(e){case"bold":l=`**${s}**`,a=2,i=-2;break;case"underline":l=`<u>${s}</u>`,a=3,i=-4;break;case"italic":l=`*${s}*`,a=1,i=-1;break;case"strikeThrough":l=`~${s}~`,a=1,i=-1;break;case"sub":l=`<sub>${s}</sub>`,a=5,i=-6;break;case"sup":l=`<sup>${s}</sup>`,a=5,i=-6;break;case"codeRow":l="`"+s+"`",a=1,i=-1;break;case"quote":l=`> ${s}`,a=2;break;case"orderedList":l=`1. ${s}`,a=3;break;case"unorderedList":l=`- ${s}`,a=2;break;case"code":l="```language\n"+s+"\n```\n",a=3,i=11-l.length,r=!0;break;case"table":l="| 表头 | 表头 |\n| - | - |\n| 内容 | 内容 |\n",a=2,i=4-l.length,r=!0;break;case"link":{const{desc:e,url:s}=t;l=`[${e}](${s})`;break}case"image":{const{desc:e,url:s}=t;l=`![${e}](${s})\n`}}}return _(n,l,{deviationStart:a,deviationEnd:i,select:r})})(s,l,t.value,n))}})}));const r=y((()=>s.value?C(e.value):""));let o=()=>{};v((()=>r.value),(s=>{e.onHtmlChanged(s),j((()=>{e.setting.preview&&(o=H(t.value,a.value||i.value)),document.querySelectorAll(`.${J}-preview-wrapper pre`).forEach((e=>{const s=document.createElement("span");s.setAttribute("class","copy-button"),s.innerText="复制代码",s.addEventListener("click",(()=>{$(e.querySelector("code").innerText)})),e.appendChild(s)}))}))}));const c=()=>{C.setOptions({highlight:e=>window.hljs.highlightAuto(e).value}),s.value=!0};return v((()=>e.setting.preview),(e=>{e?j((()=>{o=H(t.value,a.value||i.value)})):o()})),(e=>{const s=k("historyLength");let n=-1;const t={list:[e.value],userUpdated:!0,curr:0};v((()=>e.value),(e=>{clearTimeout(n),n=setTimeout((()=>{t.userUpdated?(t.curr<t.list.length-1&&(t.list=t.list.slice(0,t.curr+1)),t.list.length>s&&t.list.shift(),t.list.push(e),t.curr=t.list.length-1):t.userUpdated=!0}),500)})),F.on({name:"ctrlZ",callback(){t.userUpdated=!1,t.curr=t.curr-1<0?0:t.curr-1,e.onChange(t.list[t.curr])}}),F.on({name:"ctrlShiftZ",callback(){t.userUpdated=!1,t.curr=t.curr+1===t.list.length?t.curr:t.curr+1,e.onChange(t.list[t.curr])}})})(e),()=>d(w,null,[d("div",{class:`${J}-content`},[d("div",{class:[`${J}-input-wrapper`]},[d("textarea",{ref:t,value:e.value,onInput:s=>{l="",e.onChange(s.target.value)},class:[e.setting.preview||e.setting.htmlPreview?"":"textarea-only"]},null)]),e.setting.preview&&d("div",{ref:a,class:`${J}-preview-wrapper`,innerHTML:r.value},null),e.setting.htmlPreview&&d("div",{ref:i,class:`${J}-html-wrapper`},[r.value])]),null===e.hljs&&d(f,{to:document.head},{default:()=>[d("link",{rel:"stylesheet",href:n.css},null),d("script",{src:n.js,onLoad:c},null)]})])}});const J="md";var X=o({name:"MdEditorV3",props:{modelValue:{type:String,default:""},theme:{type:String,default:"light"},editorClass:{type:String,default:""},hljs:{type:Object,default:null},highlightJs:{type:String,default:"https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/highlight.min.js"},highlightCss:{type:String,default:"https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/styles/atom-one-dark.min.css"},historyLength:{type:Number,default:10},onChange:{type:Function},onSave:{type:Function,default:()=>()=>{}},onUploadImg:{type:Function},pageFullScreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},language:{type:String,default:"zh-CN"},languageUserDefined:{type:Array,default:()=>[]},toolbars:{type:Array,default:["bold","underline","italic","strikeThrough","title","sub","sup","quote","unorderedList","orderedList","codeRow","code","link","image","table","revoke","next","save","prettier","pageFullscreen","fullscreen","preview","htmlPreview","github"]},prettier:{type:Boolean,default:!0},prettierCDN:{type:String,default:"https://unpkg.com/prettier@2.3.2/standalone.js"},prettierMDCDN:{type:String,default:"https://unpkg.com/prettier@2.3.2/parser-markdown.js"},editorName:{type:String,default:"editor"},onHtmlChanged:{type:Function}},setup(e,s){((e,s)=>{F.on({name:"onSave",callback(){e.onSave?e.onSave(e.modelValue):s.emit("onSave",e.modelValue)}});const n=s=>{var n,t,l,a,i,r,o,d,c,p,u,h,g,v,m,b,f,j,k,y,w,C;if(s.ctrlKey||s.metaKey)switch(s.code){case"KeyS":s.shiftKey?(null==(n=e.toolbars)?void 0:n.includes("strikeThrough"))&&F.emit("replace","strikeThrough"):(null==(t=e.toolbars)?void 0:t.includes("save"))&&(F.emit("onSave",e.modelValue),s.preventDefault());break;case"KeyB":(null==(l=e.toolbars)?void 0:l.includes("bold"))&&(F.emit("replace","bold"),s.preventDefault());break;case"KeyU":s.shiftKey?(null==(a=e.toolbars)?void 0:a.includes("unorderedList"))&&(F.emit("replace","unorderedList"),s.preventDefault()):(null==(i=e.toolbars)?void 0:i.includes("underline"))&&(F.emit("replace","underline"),s.preventDefault());break;case"KeyI":s.shiftKey?(null==(r=e.toolbars)?void 0:r.includes("image"))&&(F.emit("openModals","img"),s.preventDefault()):(null==(o=e.toolbars)?void 0:o.includes("italic"))&&(F.emit("replace","italic"),s.preventDefault());break;case"Digit1":(null==(d=e.toolbars)?void 0:d.includes("title"))&&(F.emit("replace","h1"),s.preventDefault());break;case"Digit2":(null==(c=e.toolbars)?void 0:c.includes("title"))&&(F.emit("replace","h2"),s.preventDefault());break;case"Digit3":(null==(p=e.toolbars)?void 0:p.includes("title"))&&(F.emit("replace","h3"),s.preventDefault());break;case"Digit4":(null==(u=e.toolbars)?void 0:u.includes("title"))&&(F.emit("replace","h4"),s.preventDefault());break;case"Digit5":(null==(h=e.toolbars)?void 0:h.includes("title"))&&(F.emit("replace","h5"),s.preventDefault());break;case"Digit6":(null==(g=e.toolbars)?void 0:g.includes("title"))&&(F.emit("replace","h6"),s.preventDefault());break;case"ArrowUp":(null==(v=e.toolbars)?void 0:v.includes("sup"))&&(F.emit("replace","sup"),s.preventDefault());break;case"ArrowDown":(null==(m=e.toolbars)?void 0:m.includes("sub"))&&(F.emit("replace","sub"),s.preventDefault());break;case"KeyQ":F.emit("replace","quote"),s.preventDefault();break;case"KeyO":(null==(b=e.toolbars)?void 0:b.includes("orderedList"))&&(F.emit("replace","orderedList"),s.preventDefault());break;case"KeyC":s.shiftKey?(null==(f=e.toolbars)?void 0:f.includes("code"))&&(F.emit("replace","code"),s.preventDefault()):s.altKey&&(null==(j=e.toolbars)?void 0:j.includes("codeRow"))&&(F.emit("replace","codeRow"),s.preventDefault());break;case"KeyL":(null==(k=e.toolbars)?void 0:k.includes("link"))&&(F.emit("openModals","link"),s.preventDefault());break;case"KeyZ":s.shiftKey?(null==(y=e.toolbars)?void 0:y.includes("next"))&&(F.emit("ctrlShiftZ"),s.preventDefault()):(null==(w=e.toolbars)?void 0:w.includes("revoke"))&&(F.emit("ctrlZ"),s.preventDefault());break;case"KeyF":s.shiftKey&&(null==(C=e.toolbars)?void 0:C.includes("prettier"))&&(F.emit("replace","prettier"),s.preventDefault())}},t=e=>{if(e.clipboardData&&e.clipboardData.files.length>0){const s=e.clipboardData.files[0];/image\/.*/.test(s.type)&&(F.emit("uploadImage",[s]),e.preventDefault())}};p((()=>{window.addEventListener("keydown",n),document.addEventListener("paste",t)})),u((()=>{window.removeEventListener("keydown",n),document.removeEventListener("paste",t)}))})(e,s),x("highlight",{js:e.highlightJs,css:e.highlightCss}),x("historyLength",e.historyLength);const n=y((()=>{const s=r(r({},E),e.languageUserDefined);return s[e.language]?s[e.language]:E["zh-CN"]}));x("usedLanguageText",n.value),x("toolbars",e.toolbars),x("editorName",e.editorName),F.on({name:"uploadImage",callback(n,t){const l=e=>{e.forEach((e=>{setTimeout((()=>{F.emit("replace","image",{desc:"",url:e})}),0)})),t&&t()};e.onUploadImg?e.onUploadImg(n,l):s.emit("onUploadImg",n,l)}});const t=h({pageFullScreen:e.pageFullScreen,fullscreen:!1,preview:e.preview,htmlPreview:!e.preview&&e.htmlPreview}),l=(e,s)=>{t[s]=e,"preview"===s&&t.preview?t.htmlPreview=!1:"htmlPreview"===s&&t.htmlPreview&&(t.preview=!1)};let a="";const i=()=>{t.pageFullScreen||t.fullscreen?(a=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=a};return v((()=>[t.pageFullScreen,t.fullscreen]),i),i(),()=>d("div",{id:`${J}-${e.editorName}`,class:[J,e.editorClass,"dark"===e.theme&&`${J}-dark`,t.fullscreen||t.pageFullScreen?`${J}-fullscreen`:""]},[d(Z,{setting:t,updateSetting:l},null),d(W,{hljs:e.hljs,value:e.modelValue,onChange:n=>{e.onChange?e.onChange(n):s.emit("update:modelValue",n)},setting:t,onHtmlChanged:n=>{e.onHtmlChanged?e.onHtmlChanged(n):s.emit("onHtmlChanged",n)}},null),d(f,{to:document.head},{default:()=>[d("script",{src:L},null)]}),e.prettier&&d(f,{to:document.head},{default:()=>[d("script",{src:e.prettierCDN},null),d("script",{src:e.prettierMDCDN},null)]})])}});X.install=e=>(e.component(X.name,X),e);var Y=o({props:{theme:String,onChange:{type:Function,default:()=>{}}},setup(e){const s=h({text:'## md-editor-v3\n\nMarkdown 编辑器，基于 vue3，使用 jsx 和 typescript 语法开发，支持切换主题、prettier 美化文本等。\n\n## 基本演示\n\n**加粗**，<u>下划线</u>，_斜体_，~删除线~，上标<sup>26</sup>，下标<sub>[1]</sub>，`inline code`，[超链接](https://imbf.cc)\n\n> 引用：世界上没有绝对，只有相对\n\n## 代码演示\n\n```js\nimport { defineComponent, ref } from "vue";\nimport MdEditor from "md-editor-v3";\nimport "md-editor-v3/lib/style.css";\n\n\nexport default defineComponent({\n  name: "MdEditor",\n  setup() {\n    const text = ref("");\n    return () => (\n      <MdEditor modelValue={text.value} onChange={(v: string) => (text.value = v)} />\n    );\n  }\n});\n```\n\n\n## 文本演示\n\n\n依照普朗克长度这项单位，目前可观测的宇宙的直径估计值（直径约 930 亿光年，即 8.8 × 10<sup>26</sup> 米）即为 5.4 × 10<sup>61</sup>倍普朗克长度。而可观测宇宙体积则为 8.4 × 10<sup>184</sup>立方普朗克长度（普朗克体积）。\n\n\n## 表格演示\n\n\n| 昵称 | 猿龄（年） | 来自      |\n| ---- | ---------- | --------- |\n| 之间 | 3          | 中国-重庆 |\n\n\n## 占个坑@！\n'});return()=>d("div",{class:"project-preview"},[d("div",{class:"container"},[d(X,{theme:e.theme,modelValue:s.text,onSave:e=>{localStorage.setItem("XHMPGLJIZTDB",e)},onChange:e=>s.text=e,onUploadImg:(e,s)=>{console.log(e),s(["https://art-1252753142.cos.ap-chengdu.myqcloud.com/2021/06301522413082599421018280471.png","https://art-1252753142.cos.ap-chengdu.myqcloud.com/2021/06301606102817061001806835437.gif"])}},null)])])}}),G=o({setup:()=>()=>d("div",{class:"doc"},[d("div",{class:"container"},[d("div",{class:"doc-usage",innerHTML:'<h2 id="1-基本使用示例">1. 基本使用示例</h2>\n<p>目前一直在迭代开发，所以尽量安装最新版本。</p>\n<pre><code class="language-shell">yarn <span class="hljs-keyword">add</span> md-editor-v3\n</code></pre>\n<p>目前 vue3 已经能很友好的使用 jsx 来开发了，对于一些爱好者（比如作者本身），需要考虑兼容一下。</p>\n<p>两种方式开发上区别在于<strong>vue 模板</strong>能很好的支持<code>vue</code>特性，比如指令，内置的双向绑定等；而<strong>jsx 语法</strong>更偏向于<code>react</code>的理念，开发环境来讲 jsx 如果在支持 ts 的环境下，会更友好一些。</p>\n<h3 id="11-传统开发模式">1.1 传统开发模式</h3>\n<p>通过直接链接生产版本来使用，下面是一个小 demo：</p>\n<pre><code class="language-js"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>\n<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>传统开发模式中使用<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"md-editor-v3"</span>&gt;</span>\n      <span class="hljs-tag">&lt;<span class="hljs-name">md-editor-v3</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"text"</span> /&gt;</span>\n    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/vue@3.1.5/dist/vue.global.prod.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.jsdelivr.net/npm/md-editor-v3@1.1.2/lib/md-editor-v3.umd.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">\n      <span class="hljs-keyword">const</span> <span class="hljs-title class_">App</span> = {\n        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) {\n          <span class="hljs-keyword">return</span> {\n            <span class="hljs-attr">text</span>: <span class="hljs-string">\'Hello Editor!!\'</span>\n          };\n        }\n      };\n      <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(<span class="hljs-title class_">MdEditor</span>V3).<span class="hljs-title function_">mount</span>(<span class="hljs-string">\'#md-editor-v3\'</span>);\n    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>\n</code></pre>\n<h3 id="12-模块化的-vue-模板">1.2 模块化的 vue 模板</h3>\n<pre><code class="language-js"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>\n  <span class="hljs-tag">&lt;<span class="hljs-name">md-editor</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"text"</span> /&gt;</span>\n<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>\n\n<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="language-javascript">\n<span class="hljs-keyword">import</span> { defineComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">\'vue\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">MdEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">\'md-editor-v3\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">\'md-editor-v3/lib/style.css\'</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({\n  <span class="hljs-attr">components</span>: {\n    <span class="hljs-title class_">MdEditor</span>\n  },\n  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">return</span> {\n      <span class="hljs-attr">text</span>: <span class="hljs-string">\'\'</span>\n    };\n  }\n});\n</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>\n</code></pre>\n<h3 id="13-模块化的-jsx">1.3 模块化的 jsx</h3>\n<pre><code class="language-js"><span class="hljs-keyword">import</span> { defineComponent, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">\'vue\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-title class_">MdEditor</span> <span class="hljs-keyword">from</span> <span class="hljs-string">\'md-editor-v3\'</span>;\n<span class="hljs-keyword">import</span> <span class="hljs-string">\'md-editor-v3/lib/style.css\'</span>;\n\n<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({\n  <span class="hljs-attr">name</span>: <span class="hljs-string">\'MdEditor\'</span>,\n  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) {\n    <span class="hljs-keyword">const</span> text = <span class="hljs-title function_">ref</span>(<span class="hljs-string">\'\'</span>);\n    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> (\n      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">MdEditor</span> <span class="hljs-attr">modelValue</span>=<span class="hljs-string">{text.value}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(v:</span> <span class="hljs-attr">string</span>) =&gt;</span> (text.value = v)} /&gt;</span>\n    );\n  }\n});\n</code></pre>\n<h3 id="14-图片上传">1.4 图片上传</h3>\n<p>默认可以选择多张图片，支持截图粘贴板上传图片，支持复制网页图片粘贴上传。</p>\n<blockquote>\n<p>注意：粘贴板上传时，如果是网页上的 gif 图，无法正确上传为 gif 格式！请保存本地后再手动上传。</p>\n</blockquote>\n<pre><code class="language-js"><span class="hljs-keyword">async</span> <span class="hljs-title function_">onUploadImg</span>(<span class="hljs-params">files: FileList, callback: (urls: <span class="hljs-built_in">string</span>[]) =&gt; <span class="hljs-built_in">void</span></span>) {\n  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(\n    <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(files).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {\n      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">rev, rej</span>) =&gt;</span> {\n        <span class="hljs-keyword">const</span> form = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormData</span>();\n        form.<span class="hljs-title function_">append</span>(<span class="hljs-string">\'file\'</span>, file);\n\n        axios\n          .<span class="hljs-title function_">post</span>(<span class="hljs-string">\'/api/img/upload\'</span>, form, {\n            <span class="hljs-attr">headers</span>: {\n              <span class="hljs-string">\'Content-Type\'</span>: <span class="hljs-string">\'multipart/form-data\'</span>\n            }\n          })\n          .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-title function_">rev</span>(res))\n          .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title function_">rej</span>(error));\n      });\n    })\n  );\n\n  <span class="hljs-title function_">callback</span>(res.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: <span class="hljs-built_in">any</span></span>) =&gt;</span> item.<span class="hljs-property">data</span>.<span class="hljs-property">url</span>));\n}\n</code></pre>\n<h2 id="2-props-说明">2. Props 说明</h2>\n<p>这是组件最重要的一部分内容，<code>MdEditorV3</code>的属性参数如下：</p>\n<br>\n\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>类型</th>\n<th>默认值</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>modelValue</td>\n<td>String</td>\n<td>\'\'</td>\n<td>编辑器内容，vue 模板支持双向绑定（v-model="value"），jsx 中需结合 onChange 事件使用。</td>\n</tr>\n<tr>\n<td>theme</td>\n<td>\'light\' | \'dark\'</td>\n<td>\'light\'</td>\n<td>主题切换</td>\n</tr>\n<tr>\n<td>editorClass</td>\n<td>String</td>\n<td>\'\'</td>\n<td>将被放到编辑器最外层类中，可用于覆盖某些特定的样式。</td>\n</tr>\n<tr>\n<td>hljs</td>\n<td>Object</td>\n<td>null</td>\n<td>项目中使用到了 highlight，可将实例直接传递，生产环境则不会请求 CDN，需要手动导入支持的高亮代码样式，参考：<a href="https://www.jsdelivr.com/package/npm/highlight.js?path=styles">代码样式传送门</a>。</td>\n</tr>\n<tr>\n<td>highlightJs</td>\n<td>String</td>\n<td><a href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/highlight.min.js">highlight.js</a></td>\n<td>highlightJs CDN 链接。</td>\n</tr>\n<tr>\n<td>highlightCss</td>\n<td>String</td>\n<td><a href="https://cdn.bootcdn.net/ajax/libs/highlight.js/11.0.1/styles/atom-one-dark.min.css">atom-one-dark</a></td>\n<td>预览高亮代码样式，更多参考上方<strong>代码样式传送门</strong>。</td>\n</tr>\n<tr>\n<td>historyLength</td>\n<td>Number</td>\n<td>10</td>\n<td>最大记录操作数，默认只记录最近 10 条输入。</td>\n</tr>\n<tr>\n<td>pageFullScreen</td>\n<td>Boolean</td>\n<td>false</td>\n<td>页面内全屏。</td>\n</tr>\n<tr>\n<td>preview</td>\n<td>Boolean</td>\n<td>true</td>\n<td>预览模式，左右分栏，左边为编辑器，右边为内容预览。</td>\n</tr>\n<tr>\n<td>htmlPreview</td>\n<td>Boolean</td>\n<td>false</td>\n<td>直接显示 编译后的 html 源代码（选中复制该内容不能完全展示，因为换行符被忽略了，要获取 html 代码请使用下面的监听事件）。</td>\n</tr>\n<tr>\n<td>language</td>\n<td>String</td>\n<td>\'zh-CN\'</td>\n<td>内置中英文(\'zh-CN\',\'en-US\')，可自行扩展其他语言，同时可覆盖内置的中英文。</td>\n</tr>\n<tr>\n<td>languageUserDefined</td>\n<td>Array</td>\n<td>[{key: StaticTextDefaultValue}]</td>\n<td>通过这里扩展语言，修改 language 值为扩展 key 即可，类型申明可手动导入</td>\n</tr>\n<tr>\n<td>toolbars</td>\n<td>Array</td>\n<td>[all]</td>\n<td>选择性展示工具栏，可选内容如下<sup>[toolbars]<sup></sup></sup></td>\n</tr>\n<tr>\n<td>prettier</td>\n<td>Boolean</td>\n<td>true</td>\n<td>是否启用 prettier 优化 md 内容</td>\n</tr>\n<tr>\n<td>prettierCDN</td>\n<td>String</td>\n<td><a href="https://unpkg.com/prettier@2.3.2/standalone.js">standalone</a></td>\n<td></td>\n</tr>\n<tr>\n<td>prettierMDCDN</td>\n<td>String</td>\n<td><a href="https://unpkg.com/prettier@2.3.2/parser-markdown.js">parser-markdown</a></td>\n<td></td>\n</tr>\n<tr>\n<td>editorName</td>\n<td>String</td>\n<td>\'editor\'</td>\n<td>当在同一页面放置了多个编辑器，最好提供该属性以区别某些带有 ID 的内容</td>\n</tr>\n</tbody></table>\n<br>\n\n<blockquote>\n<p>!!! 编辑器内比较大小的扩展均使用了 CDN 链接，在没有外网的情况，请使用扩展属性替换为本地链接，比如：highlightJs = "//xxx.com/highlight.min.js"</p>\n</blockquote>\n<p><strong>工具栏选项</strong></p>\n<pre><code class="language-js"><span class="hljs-string">\'bold\'</span>, <span class="hljs-string">\'underline\'</span>, <span class="hljs-string">\'italic\'</span>, <span class="hljs-string">\'strikeThrough\'</span>, <span class="hljs-string">\'sub\'</span>, <span class="hljs-string">\'sup\'</span>, <span class="hljs-string">\'quote\'</span>, <span class="hljs-string">\'unorderedList\'</span>,\n<span class="hljs-string">\'orderedList\'</span>, <span class="hljs-string">\'codeRow\'</span>, <span class="hljs-string">\'code\'</span>, <span class="hljs-string">\'link\'</span>, <span class="hljs-string">\'image\'</span>, <span class="hljs-string">\'table\'</span>, <span class="hljs-string">\'revoke\'</span>, <span class="hljs-string">\'next\'</span>, <span class="hljs-string">\'save\'</span>,\n<span class="hljs-string">\'pageFullscreen\'</span>, <span class="hljs-string">\'fullscreen\'</span>, <span class="hljs-string">\'preview\'</span>, <span class="hljs-string">\'htmlPreview\'</span>, <span class="hljs-string">\'github\'</span>\n\n<span class="hljs-comment">// 对应功能名称</span>\n<span class="hljs-string">\'加粗\'</span>, <span class="hljs-string">\'下划线\'</span>, <span class="hljs-string">\'斜体\'</span>, <span class="hljs-string">\'删除线\'</span>, <span class="hljs-string">\'下标\'</span>, <span class="hljs-string">\'上标\'</span>, <span class="hljs-string">\'引用\'</span>, <span class="hljs-string">\'无序列表\'</span>,\n<span class="hljs-string">\'有序列表\'</span>, <span class="hljs-string">\'行内代码\'</span>, <span class="hljs-string">\'块级代码\'</span>, <span class="hljs-string">\'链接\'</span>, <span class="hljs-string">\'图片\'</span>, <span class="hljs-string">\'表格\'</span>, <span class="hljs-string">\'后退一步\'</span>, <span class="hljs-string">\'前进一步\'</span>, <span class="hljs-string">\'保存\'</span>，\n<span class="hljs-string">\'页面内全屏\'</span>, <span class="hljs-string">\'屏幕全屏\'</span>, <span class="hljs-string">\'内容预览\'</span>, <span class="hljs-string">\'html代码预览\'</span>, <span class="hljs-string">\'源码地址\'</span>\n</code></pre>\n<p>自定义语言，可在源码中搜索<code>StaticTextDefaultValue</code>，即可找到类型提示。中文示例（某些字段若不主动提供，可能会造成页面不美观）：</p>\n<pre><code class="language-js">{\n    toolbarTips: {\n      bold: <span class="hljs-string">\'加粗\'</span>,\n      underline: <span class="hljs-string">\'下划线\'</span>,\n      italic: <span class="hljs-string">\'斜体\'</span>,\n      strikeThrough: <span class="hljs-string">\'删除线\'</span>,\n      title: <span class="hljs-string">\'标题\'</span>,\n      sub: <span class="hljs-string">\'下标\'</span>,\n      sup: <span class="hljs-string">\'上标\'</span>,\n      quote: <span class="hljs-string">\'引用\'</span>,\n      unorderedList: <span class="hljs-string">\'无序列表\'</span>,\n      orderedList: <span class="hljs-string">\'有序列表\'</span>,\n      codeRow: <span class="hljs-string">\'行内代码\'</span>,\n      code: <span class="hljs-string">\'块级代码\'</span>,\n      link: <span class="hljs-string">\'链接\'</span>,\n      image: <span class="hljs-string">\'图片\'</span>,\n      table: <span class="hljs-string">\'表格\'</span>,\n      revoke: <span class="hljs-string">\'后退\'</span>,\n      next: <span class="hljs-string">\'前进\'</span>,\n      save: <span class="hljs-string">\'保存\'</span>,\n      prettier: <span class="hljs-string">\'美化\'</span>,\n      pageFullscreen: <span class="hljs-string">\'浏览器全屏\'</span>,\n      fullscreen: <span class="hljs-string">\'屏幕全屏\'</span>,\n      preview: <span class="hljs-string">\'预览\'</span>,\n      htmlPreview: <span class="hljs-string">\'html代码预览\'</span>,\n      github: <span class="hljs-string">\'源码地址\'</span>\n    },\n    titleItem: {\n      h1: <span class="hljs-string">\'一级标题\'</span>,\n      h2: <span class="hljs-string">\'二级标题\'</span>,\n      h3: <span class="hljs-string">\'三级标题\'</span>,\n      h4: <span class="hljs-string">\'四级标题\'</span>,\n      h5: <span class="hljs-string">\'五级标题\'</span>,\n      h6: <span class="hljs-string">\'六级标题\'</span>\n    },\n    linkModalTips: {\n      title: <span class="hljs-string">\'添加\'</span>,\n      descLable: <span class="hljs-string">\'链接描述：\'</span>,\n      descLablePlaceHolder: <span class="hljs-string">\'请输入描述...\'</span>,\n      urlLable: <span class="hljs-string">\'链接地址：\'</span>,\n      UrlLablePlaceHolder: <span class="hljs-string">\'请输入链接...\'</span>,\n      buttonOK: <span class="hljs-string">\'确定\'</span>,\n      buttonUpload: <span class="hljs-string">\'上传\'</span>\n    }\n  }\n</code></pre>\n<h2 id="3-绑定事件">3. 绑定事件</h2>\n<p>目前支持的内容如下：</p>\n<br>\n\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>入参</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>onChange</td>\n<td>v:String</td>\n<td>内容变化事件（当前与<code>textare</code>的<code>oninput</code>事件绑定，每输入一个单字即会触发）</td>\n</tr>\n<tr>\n<td>onSave</td>\n<td>v:String</td>\n<td>保存事件，快捷键与保存按钮均会触发</td>\n</tr>\n<tr>\n<td>onUploadImg</td>\n<td>files:FileList, callback:Function</td>\n<td>上传图片事件，弹窗会等待上传结果，务必将上传后的 urls 作为 callback 入参回传</td>\n</tr>\n<tr>\n<td>onHtmlChanged</td>\n<td>h:String</td>\n<td>html 变化回调事件，用于获取预览 html 代码</td>\n</tr>\n</tbody></table>\n<br>\n\n<h2 id="4-快捷键使用">4. 快捷键使用</h2>\n<p>目前除了<code>CTRL + T</code>与浏览器冲突意外，其余的都绑定了相应的快捷键。</p>\n<p>主要以<code>CTRL</code>搭配对应功能英文单词首字母，冲突项添加<code>SHIFT</code>，再冲突替换为<code>ALT</code>。</p>\n<table>\n<thead>\n<tr>\n<th>键位</th>\n<th>功能</th>\n<th>说明</th>\n<th>开发标记</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>CTRL + S</td>\n<td>保存</td>\n<td>触发编辑器的<code>onSave</code>回调</td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + B</td>\n<td>加粗</td>\n<td><code>**加粗**</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + U</td>\n<td>下划线</td>\n<td><code>&lt;u&gt;下划线&lt;/u&gt;</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + I</td>\n<td>斜体</td>\n<td><code>*斜体*</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + 1-6</td>\n<td>1-6 级标题</td>\n<td><code># 标题</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + ↑</td>\n<td>上角标</td>\n<td><code>&lt;sup&gt;上角标&lt;/sup&gt;</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + ↓</td>\n<td>下角标</td>\n<td><code>&lt;sub&gt;下角标&lt;/sub&gt;</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + Q</td>\n<td>引用</td>\n<td><code>&gt; 引用</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + O</td>\n<td>有序列表</td>\n<td><code>1. 有序列表</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + L</td>\n<td>链接</td>\n<td><code>[链接](https://imbf.cc)</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + T</td>\n<td>表格</td>\n<td><code>|表格|</code> 放弃开发（无法实现）</td>\n<td>x</td>\n</tr>\n<tr>\n<td>CTRL + Z</td>\n<td>撤回</td>\n<td>触发编辑器内内容撤回，与系统无关</td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + S</td>\n<td>删除线</td>\n<td><code>~删除线~</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + U</td>\n<td>无序列表</td>\n<td><code>- 无序列表</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + C</td>\n<td>块级代码</td>\n<td>多行代码块</td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + I</td>\n<td>图片链接</td>\n<td><code>![图片](https://imbf.cc)</code></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + Z</td>\n<td>前进一步</td>\n<td>触发编辑器内内容前进，与系统无关</td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + SHIFT + F</td>\n<td>美化内容</td>\n<td></td>\n<td>√</td>\n</tr>\n<tr>\n<td>CTRL + ALT + C</td>\n<td>行内代码</td>\n<td>行内代码块</td>\n<td>√</td>\n</tr>\n</tbody></table>\n<h2 id="5-开发理念">5. 开发理念</h2>\n<p>本节介绍编辑器中部分功能的实现。</p>\n<h3 id="51-编辑区">5.1 编辑区</h3>\n<ul>\n<li><p>由于不是富文本编辑器，所以采用了<code>textarea</code>标签作为编辑区。</p>\n</li>\n<li><p>为解决代码插入文本，在我的博客留言板中封装了两个比较实用的方法<code>insert</code>和<code>setPosition</code>，一个用于向光标位置插入特定内容，另一个用于重新定位光标位置，<a href="https://github.com/imzbf/md-editor-v3/blob/master/MdEditor/utils/index.ts">源码位置</a>。</p>\n</li>\n<li><p>编辑器与工具栏的交互，由于没有 vuex，所以内置了<code>EventBus</code>，在不同地方通过这种方式来进行交互。（目前，同一页面嵌入两个编辑器<code>EventBus</code>被共享，暂未修复）。</p>\n</li>\n<li><p>编辑器与快捷键，通过监听每一个按键对应的<code>ctrl</code>、<code>shift</code>等属性是否为<code>true</code>实现，并且均阻止了默认事件触发。在 windows 中以<code>CTRL</code>键为主要触发单元，在 MacOS 中以<code>META</code>键为主。</p>\n</li>\n</ul>\n<h3 id="52-组件：divider">5.2 组件：<strong>Divider</strong></h3>\n<p>分隔符，应用于工具栏中分隔功能模块，美化作用，实现为以宽为<code>1px</code>的元素做衬托。</p>\n<h3 id="53-组件：dropdown">5.3 组件：<strong>Dropdown</strong></h3>\n<p>源码：<a href="https://github.com/imzbf/md-editor-v3/tree/master/MdEditor/components/Dropdown">传送门</a></p>\n<ul>\n<li><p>下拉模块，主要用于下拉菜单使用。该组件将主插槽内容作为触发器，<code>overlay</code>插槽内容作为拉下展示内容，通过 vue 内置的<code>cloneVNode</code>方法克隆组件，以绑定扩展属性及事件，达到了不添加多余的节点的目的；</p>\n</li>\n<li><p>内容插入通过 vue 内置的<code>Teleport</code>组件，将内容插入到编辑器内部（预设的地方），不会污染全局结构；</p>\n</li>\n<li><p>在卸载对应组件时，<code>onUnmounted</code>方法会主动卸载绑定事件。</p>\n</li>\n</ul>\n<h3 id="54-组件：modal">5.4 组件：Modal</h3>\n<p>源码：<a href="https://github.com/imzbf/md-editor-v3/tree/master/MdEditor/components/Modal">传送门</a></p>\n<ul>\n<li>作为弹窗模块使用，实现与<strong>Dropdown</strong>大为相似，默认了显示动画及居中位置；</li>\n<li>这里加入了一个新特性，在显示弹窗时，可以通过点击弹窗标题移动弹框。</li>\n</ul>\n<p>封装的移动元素<a href="https://github.com/imzbf/md-editor-v3/blob/master/MdEditor/utils/dom.ts">代码</a>，优化了正确解绑事件，该方法针对了触发器实现，单一窗口并不通用。</p>\n<h3 id="55-主题模式">5.5 主题模式</h3>\n<p>内置了暗黑和默认模式，两种模式由内部<code>theme</code>属性控制，由于<code>antd</code>中以<code>less</code>修改变量值达到切换主题的方式依赖项较多，并未采用，实现则是最基础的两种主题两种模式的方式。</p>\n<h2 id="结尾">结尾</h2>\n<p>若有觉得可用的功能或发现编辑器的 Bug，请通过以下方式反馈给我，让我们共同进步。</p>\n<ol>\n<li>邮箱：<a href="mailto:zbfcqtl@163.com">zbfcqtl@163.com</a></li>\n<li>博客留言：<a href="https://imbf.cc">imbf.cc</a></li>\n<li>issue 管理：<a href="https://github.com/imzbf/md-editor-v3/issues">github issues</a></li>\n</ol>'},null)])])});T(o({setup(){const e=g("light");return()=>d("div",{class:["app","dark"===e.value&&"theme-dark"]},[d(S,{theme:e.value,onChange:s=>e.value=s},null),d("div",{class:"page-body"},[d(Y,{theme:e.value,onChange:s=>e.value=s},null),d(G,null,null)])])}})).mount("#app");
